<div class="card-form">
    <div class="clearfix">
        <div class="left-nav-bar pull-left row-header">
            <div>
                <img alt="back" class="img-fluid" src="./../../../../../../assets/images/home/Mask_Group_18824.png"
                     (click)="goBack();">
                <span *ngIf="!formSave.get('documentId').value" class="title" translate>documentType.addDocument</span>
                <span *ngIf="formSave.get('documentId').value && isView === false" class="title" translate>documentType.editDocument</span>
                <span *ngIf="formSave.get('documentId').value && isView === true" class="title" translate>documentType.viewDocument</span>
            </div>
        </div>
        <div class="right-nav-bar pull-right left-option">
            <ul class="header-right sys-ul space-line">
                <li>
                    <button class="btn btn-sm vt-btn mt-btn ng-star-inserted" type="button" (click)="goBack();"
                            [innerHTML]="'common.button.out' | translate">
                    </button>
                </li>
                <li *ngIf="isView==false">
                    <button class="btn btn-sm vt-btn btn-submit mt-btn ng-star-inserted" type="button"
                            (click)="processSaveOrUpdate()" [innerHTML]="'common.button.icon.save' | translate">
                    </button>
                </li>
                <li *ngIf="isView==true">
                    <button class="btn btn-sm vt-btn btn-submit mt-btn btn-header-right ng-star-inserted" type="button"
                            (click)="navigate()" [innerHTML]="'common.button.icon.edit' | translate">
                    </button>
                </li>
            </ul>
        </div>
    </div>
</div>
<div class="info">
    <div *ngIf="(hasPermission('action.view') && isView) || (hasPermission('action.update') && isUpdate) || (hasPermission('action.insert') && isInsert)">
        <div class="panel panel-default card-info">
            <form id="formSave" [formGroup]="formSave">
                <div class="panel-heading vt-relative">
                    <strong>
                        <!-- <span *ngIf="!formSave.get('documentId').value" translate>documentType.addDocument</span>
                        <span *ngIf="formSave.get('documentId').value && isView === false" translate>documentType.editDocument</span>
                        <span *ngIf="formSave.get('documentId').value && isView === true" translate>documentType.viewDocument</span> -->
                        <span class="ml-2 title-info">Thông tin tài liệu</span>
                    </strong>
                </div>
                <div *ngIf="!isMobileScreen" class="panel-body padding-xl ui-g">
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right"
                               [ngClass]="isView?'':'required'">
                            {{ 'document.label.documentNumber'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-lg-3">
                            <input type="text" class="form form-control" [attr.disabled]="isView?true:null"
                                   [autoFocus]="true" name="documentNumber" formControlName="documentNumber"
                                   maxlength="100">
                            <app-control-messages [control]="f['documentNumber']"></app-control-messages>
                        </div>
                        <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right"
                               [ngClass]="isView?'':'required'">
                            {{ 'document.label.name'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-lg-3">
                            <input type="text" class="form form-control" name="name" formControlName="name"
                                   [attr.disabled]="isView?true:null" maxlength="200">
                            <app-control-messages [control]="f['name']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right"
                               [ngClass]="isView?'':'required'">
                            {{ 'document.label.type'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-lg-3">
                            <select-filter
                                    [placeHolder]="'common.label.cboMustSelect'"
                                    [property]="f['type']"
                                    [options]="typeList"
                                    optionLabel="name"
                                    optionValue="categoryId"
                                    [disabled]="isView"
                            >
                            </select-filter>
                            <app-control-messages [control]="f['type']"></app-control-messages>
                        </div>
                        <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right"
                               [ngClass]="isView?'':'required'">
                            {{ 'document.label.confidentiality'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-lg-3">
                            <select-filter
                                    [placeHolder]="'common.label.cboMustSelect'"
                                    [property]="f['confidentiality']"
                                    [options]="confidentialityList"
                                    optionLabel="name"
                                    optionValue="categoryId"
                                    [disabled]="isView"
                            >
                            </select-filter>
                            <app-control-messages [control]="f['confidentiality']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right"
                               [ngClass]="isView?'':'required'">
                            {{ 'document.label.branch'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-lg-3">
                            <select-filter
                                    [placeHolder]="'common.label.cboMustSelect'"
                                    [options]="branchList"
                                    [property]="f['branch']"
                                    optionLabel="label"
                                    optionValue="value"
                                    [disabled]="isView"
                                    (onChange)="onChangeBranch($event)"
                            >
                            </select-filter>
                            <app-control-messages [control]="f['branch']"></app-control-messages>
                        </div>
                        <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right">
                            {{ 'document.label.documentType'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-lg-3">
                            <select-filter
                                    [placeHolder]="'common.label.cboSelect'"
                                    [property]="f['documentTypeId']"
                                    [options]="documentTypeList"
                                    optionLabel="name"
                                    optionValue="documentTypeId"
                                    [disabled]="isView"
                            >
                            </select-filter>
                            <app-control-messages [control]="f['documentTypeId']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right"
                               [ngClass]="isView?'':'required'">
                            {{ 'document.label.organization'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-lg-3">
                            <org-selector
                                    [property]="f['organizationId']"
                                    operationKey="action.view"
                                    adResourceKey="resource.document"
                                    [defaultValue]="true"
                                    [disabled]="isView"
                                    [isRequiredField]="true"
                            >
                            </org-selector>
                            <app-control-messages [control]="f['organizationId']"></app-control-messages>
                        </div>
                        <label *ngIf="isRequirePartyOrg === false"
                               class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right">
                            {{ 'document.label.partyOrganization'|translate }}
                        </label>
                        <label *ngIf="isRequirePartyOrg === true"
                               class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right required">
                            {{ 'document.label.partyOrganization'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-lg-3">
                            <party-org-selector
                                    [property]="f['partyOrganizationId']"
                                    operationKey="action.view"
                                    adResourceKey="resource.document"
                                    [disabled]="formSave.get('branch').value===1 ? isView?true:false : true"
                                    [defaultValue]="true"
                                    [disabled]="isView"
                                    [isRequiredField]="true"
                            >
                            </party-org-selector>
                            <app-control-messages [control]="f['partyOrganizationId']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right">
                            {{ 'document.label.startDateForm'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-lg-3">
                            <date-picker [property]="f['effectiveDate']" [disabled]="isView">
                            </date-picker>
                            <app-control-messages [control]="f['effectiveDate']"></app-control-messages>
                        </div>
                        <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right">
                            {{ 'document.label.expriredDateForm'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-lg-3">
                            <date-picker [property]="f['expritedDate']" [disabled]="isView">
                            </date-picker>
                            <app-control-messages [control]="f['expritedDate']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
                            {{ 'common.label.attachmentFile' | translate }}
                        </label>
                        <div class="ui-g-12 ui-md-3 ui-lg-3">
                            <multi-file-chooser
                                    class="attachment-file"
                                    [property]="f['files']"
                                    fileName="fileAttachment"
                                    [validMaxSize]="50"
                                    validType="png,jpg,gif,tiff,bmp,xls,xlsx,doc,docx,pdf,rar,zip,7z"
                                    [disabled]="isView"
                                    [downLoadFile]="downLoadFile"
                            >
                            </multi-file-chooser>
                            <app-control-messages [control]="f['files']"></app-control-messages>
                        </div>
                        <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
                            {{ 'document.label.signer'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-3 ui-lg-3">
                            <data-picker
                                #data
                                [property]="f['signerId']"
                                systemCode="political"
                                operationKey="action.view"
                                adResourceKey="resource.partyMember"
                                objectBO="EmployeeBO"
                                codeField="employeeCode"
                                nameField="fullName"
                                emailField="email"
                                mobileNumberField="mobileNumber"
                                selectField="employeeId"
                                [disabled]="isView"
                            >
                            </data-picker>
                            <app-control-messages [control]="f['signerId']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-3 ui-sm-3 ui-lg-2 control-label vt-align-right">
                            {{ 'document.label.isPublic'|translate }}
                        </label>

                        <div class="ui-g-12 ui-md-3 ui-lg-3">
                            <p-checkbox [formControl]="f['isPublic']"
                                        binary="true"></p-checkbox>
                        </div>
                    </div>
                </div>
                <div *ngIf="isMobileScreen" class="panel-body padding-xl ui-g">
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right"
                               [ngClass]="isView?'':'required'">
                            {{ 'document.label.documentNumber'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                            <input type="text" class="form form-control" [attr.disabled]="isView?true:null"
                                   [autoFocus]="true" name="documentNumber" formControlName="documentNumber"
                                   maxlength="100">
                            <app-control-messages [control]="f['documentNumber']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right"
                               [ngClass]="isView?'':'required'">
                            {{ 'document.label.name'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                            <input type="text" class="form form-control" name="name" formControlName="name"
                                   [attr.disabled]="isView?true:null" maxlength="200">
                            <app-control-messages [control]="f['name']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right"
                               [ngClass]="isView?'':'required'">
                            {{ 'document.label.type'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                            <select-filter
                                    [placeHolder]="'common.label.cboMustSelect'"
                                    [property]="f['type']"
                                    [options]="typeList"
                                    optionLabel="name"
                                    optionValue="categoryId"
                                    [disabled]="isView"
                            >
                            </select-filter>
                            <app-control-messages [control]="f['type']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right"
                               [ngClass]="isView?'':'required'">
                            {{ 'document.label.confidentiality'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                            <select-filter
                                    [placeHolder]="'common.label.cboMustSelect'"
                                    [property]="f['confidentiality']"
                                    [options]="confidentialityList"
                                    optionLabel="name"
                                    optionValue="categoryId"
                                    [disabled]="isView"
                            >
                            </select-filter>
                            <app-control-messages [control]="f['confidentiality']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right"
                               [ngClass]="isView?'':'required'">
                            {{ 'document.label.branch'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                            <select-filter
                                    [placeHolder]="'common.label.cboMustSelect'"
                                    [options]="branchList"
                                    [property]="f['branch']"
                                    optionLabel="label"
                                    optionValue="value"
                                    [disabled]="isView"
                                    (onChange)="onChangeBranch($event)"
                            >
                            </select-filter>
                            <app-control-messages [control]="f['branch']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right">
                            {{ 'document.label.documentType'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                            <select-filter
                                    [placeHolder]="'common.label.cboSelect'"
                                    [property]="f['documentTypeId']"
                                    [options]="documentTypeList"
                                    optionLabel="name"
                                    optionValue="documentTypeId"
                                    [disabled]="isView"
                            >
                            </select-filter>
                            <app-control-messages [control]="f['documentTypeId']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right"
                               [ngClass]="isView?'':'required'">
                            {{ 'document.label.organization'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                            <org-selector
                                    [property]="f['organizationId']"
                                    operationKey="action.view"
                                    adResourceKey="resource.document"
                                    [defaultValue]="true"
                                    [disabled]="isView"
                                    [isRequiredField]="true"
                            >
                            </org-selector>
                            <app-control-messages [control]="f['organizationId']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label *ngIf="isRequirePartyOrg === false"
                               class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right">
                            {{ 'document.label.partyOrganization'|translate }}
                        </label>
                        <label *ngIf="isRequirePartyOrg === true"
                               class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right required">
                            {{ 'document.label.partyOrganization'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                            <party-org-selector
                                    [property]="f['partyOrganizationId']"
                                    operationKey="action.view"
                                    adResourceKey="resource.document"
                                    [disabled]="formSave.get('branch').value===1 ? isView?true:false : true"
                                    [defaultValue]="true"
                                    [disabled]="isView"
                                    [isRequiredField]="true"
                            >
                            </party-org-selector>
                            <app-control-messages [control]="f['partyOrganizationId']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right">
                            {{ 'document.label.startDateForm'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                            <date-picker [property]="f['effectiveDate']" [disabled]="isView">
                            </date-picker>
                            <app-control-messages [control]="f['effectiveDate']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right">
                            {{ 'document.label.expriredDateForm'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                            <date-picker [property]="f['expritedDate']" [disabled]="isView">
                            </date-picker>
                            <app-control-messages [control]="f['expritedDate']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-3 ui-sm-3 ui-lg-2 control-label vt-align-right">
                            {{ 'common.label.attachmentFile' | translate }}
                        </label>
                        <div class="ui-g-12 ui-md-3 ui-sm-9 ui-lg-3">
                            <multi-file-chooser
                                    class="attachment-file"
                                    [property]="f['files']"
                                    fileName="fileAttachment"
                                    [validMaxSize]="50"
                                    validType="png,jpg,gif,tiff,bmp,xls,xlsx,doc,docx,pdf,rar,zip,7z"
                                    [disabled]="isView"
                                    [downLoadFile]="downLoadFile"
                            >
                            </multi-file-chooser>
                            <app-control-messages [control]="f['files']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-3 ui-sm-3 ui-lg-2 control-label vt-align-right">
                            {{ 'document.label.signer'|translate }}
                        </label>
                        <div class="ui-g-12 ui-md-3 ui-sm-9 ui-lg-3">
                            <data-picker
                                #data
                                [property]="f['signerId']"
                                systemCode="political"
                                operationKey="action.view"
                                adResourceKey="resource.partyMember"
                                objectBO="EmployeeBO"
                                codeField="employeeCode"
                                nameField="fullName"
                                emailField="email"
                                mobileNumberField="mobileNumber"
                                selectField="employeeId"
                                [disabled]="isView"
                            >
                            </data-picker>
                            <app-control-messages [control]="f['signerId']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-3 ui-sm-3 ui-lg-2 control-label vt-align-right">
                            {{ 'document.label.isPublic'|translate }}
                        </label>

                        <div class="ui-g-12 ui-md-3 ui-lg-3">
                            <p-checkbox [formControl]="f['isPublic']"
                                        binary="true"></p-checkbox>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div *ngIf="(!hasPermission('action.view') && isView) || (!hasPermission('action.update') && isUpdate) || (!hasPermission('action.insert') && isInsert)">
        {{ 'common.haveNoPermission' | translate }}
    </div>
</div>
