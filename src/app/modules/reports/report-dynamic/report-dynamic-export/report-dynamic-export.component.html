<div class="content" *ngIf="hasPermission('action.view')">
  <div class="row">
    <div class="col-md-3" *ngIf="resultList && resultList.length > 0">
      <!--        Start form type search-->
      <div class="panel panel-default">
        <div class="panel-heading vt-relative">
          <strong class="text-u-c">
            <i class="fa fa-th"></i>
            <span> {{'export.report.listTitle' | translate}}</span>
          </strong>
        </div>
        <p-scrollPanel [style]="{width: '100%', height: '700px'}" style="overflow-x:hidden;"
          styleClass="custombar2 custombar3 clearfix nopadding-custombar">
          <div class="panel-body vt-nopadding">
            <div class="table-responsive" style="width: 100%; margin: 0px;">
              <table class="table table-wrapper table-hover">
                <thead class="ui-table-thead">
                  <tr>
                    <th class="size-1 ">{{'export.report.table.no' | translate}}</th>
                    <th class="vt-align-center">{{'export.report.reportName'|translate}}</th>
                  </tr>
                  <tr>
                    <th colspan="2">
                      <input class="input-sm form-control" type="search" id="searchCategoryType" maxlength="200"
                        [(ngModel)]="reportFillter"
                        placeholder="{{'export.report.placeHolder.searchReport' | translate}}" />
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr id="categoryTypeTable" *ngFor="let item of resultList | filter : reportFillter; index as i"
                    [ngClass]="{'bg-blue-only' : item.sysMenuId === reportTypeId}" (click)="onSelectReportType(item)">
                    <td class="vt-align-center">{{i + 1}}</td>
                    <td>{{item.code}} - {{item.name}}
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </p-scrollPanel>
      </div>
      <!--        End form type of search-->
    </div>
    <div
      [ngClass]="{'col-md-9 no-padding-left': resultList && resultList.length > 0, 'col-md-12': resultList && resultList.length == 0}">
      <!--        Start form Search-->
      <div class="panel panel-default" *ngIf="hasPermission('action.view')">
        <form id="formSave" [formGroup]="formSave">
          <div class="panel-heading vt-relative">
            <strong class="text-u-c">
              <i class="fa fa-th"></i>&nbsp;
              <span>{{'app.reportDynamic.export_form_title' | translate}}</span>
              &nbsp;<span>{{reportDynamicName}}</span>
            </strong>

          </div>
          <div class="panel-body padding-xl ui-g">
            <div class="ui-g-12 vt-row" *ngIf="!(resultList && resultList.length > 0)">
              <label [hidden]="f['reportDynamicId'].isHide || isHideSelectReport"
                [ngClass]="{'required': f['reportDynamicId'].isRequire}"
                class="ui-g-12 ui-md-6 ui-lg-3 ui-lg-offset-2 control-label vt-align-right">
                {{'app.reportDynamic.chooseReport' | translate}}
              </label>
              <div [hidden]="f['reportDynamicId'].isHide || isHideSelectReport" class="ui-g-12 ui-md-6 ui-lg-4">
                <select-filter [property]="f['reportDynamicId']" [options]="listReportDynamic" optionLabel="label"
                  optionValue="value" [group]="true"
                  [placeHolder]="f['reportDynamicId'].isRequire ? 'common.label.cboMustSelect' : 'common.label.cboSelect'"
                  (onChange)="changeReportDynamic($event)">
                </select-filter>
                <app-control-messages [control]="f['reportDynamicId']"></app-control-messages>
              </div>
            </div>
            <div class="ui-g-12 vt-row">
              <ng-template inp-generate></ng-template>
            </div>
          </div>
          <div class="panel-footer vt-area-button">
            <button *ngIf="hasPermission('action.export')" [hidden]="!isAllowSearch" type="button"
              (click)="exportTables()" class="btn btn-sm btn-info">
              <span [innerHTML]="'common.button.icon.search' | translate"></span>
            </button>
            <button *ngIf="hasPermission('action.export')" type="button" (click)="exportGeneral()"
              class="btn btn-sm btn-info" [innerHTML]="'common.button.icon.export' | translate"></button>
            <button *ngIf="hasPermission('action.export')" type="button" (click)="previewExport()"
              class="btn btn-sm btn-info" [innerHTML]="'common.button.previewReport' | translate"></button>
          </div>
        </form>
      </div>
      <!--        End form Search-->

      <!--        Start data Export-->
      <div id="listArea" *ngIf="isAllowSearch && dataExport">
        <div class="panel panel-default">
          <div class="panel-heading vt-relative">
            <strong class="text-u-c">
              <i class="fa fa-th"></i>
              &nbsp;{{ 'app.reportDynamic.listTitle' | translate }}
            </strong>
          </div>
          <div class="panel-body panel-table">
            <p-table [scrollable]="true" [value]="dataExport.data" [paginator]="true" #ptable
              (onLazyLoad)="exportTables($event)" [lazyLoadOnInit]="false" [lazy]="true"
              [totalRecords]="dataExport.recordsTotal" [rows]="changeRow" [responsive]="true"
              tableStyleClass="table table-wrapper table-hover table-striped b-t b-b" styleClass="controlOverflow">
              <ng-template pTemplate="colgroup" let-columns>
                <colgroup>
                  <col class="size-1">
                  <col *ngFor="let col of dataColumns" [style.width]="col.width">
                </colgroup>
              </ng-template>
              <ng-template pTemplate="header" let-columns>
                <tr>
                  <th translate>common.table.index</th>
                  <th *ngFor="let col of dataColumns">
                    {{col.header}}
                  </th>
                </tr>
              </ng-template>
              <ng-template pTemplate="header" let-columns>
                <tr>
                  <th translate>common.table.index</th>
                  <th *ngFor="let col of dataColumns">
                    {{col.header}}
                  </th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-item let-columns="dataColumns" let-index="rowIndex+1">
                <tr>
                  <td class="vt-align-center">{{index}}</td>
                  <td *ngFor="let col of dataColumns">
                    {{item[col.field]}}
                  </td>
                </tr>
              </ng-template>
              <ng-template pTemplate="emptymessage">
                <tr>
                  <td [attr.colspan]="9" [innerHTML]="'app.noRecords' | translate">
                  </td>
                </tr>
              </ng-template>
              <ng-template pTemplate="paginatorleft">
                <table-footer (changeRow)="onTablePageChange($event)"  [resultList]="dataExport"></table-footer>
              </ng-template>
            </p-table>
          </div>
        </div>
      </div>
      <!--        End data Export-->
    </div>
  </div>
</div>

<div *ngIf="!hasPermission('action.view')" translate>
  common.haveNoPermission
</div>