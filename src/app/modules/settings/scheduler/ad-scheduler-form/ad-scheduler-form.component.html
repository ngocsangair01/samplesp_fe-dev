<div class="card-reward">
    <div class="clearfix">
        <div class="left-nav-bar pull-left row-header">
            <div>
                <img alt="back" class="img-fluid" src="./../../../../../../assets/images/home/Mask_Group_18824.png"
                    (click)="goBack();">
                <span *ngIf="isInsert" class="title">Thêm mới cấu hình tiến trình</span>
                <span *ngIf="isUpdate" class="title">Sửa cấu hình tiến trình</span>
                <span *ngIf="isView" class="title">Xem cấu hình tiến trình</span>
            </div>
        </div>
        <div class="right-nav-bar pull-right left-option">
            <ul class="header-right sys-ul space-line">
                <li>
                    <button class="btn btn-sm vt-btn ng-star-inserted" type="button" (click)="goBack();"
                        [innerHTML]="'common.button.out' | translate">
                    </button>
                </li>
                <li *ngIf="!isView">
                    <button class="btn btn-sm vt-btn btn-submit ng-star-inserted" type="button"
                        (click)="processSaveOrUpdate()" [innerHTML]="'common.button.icon.save' | translate">
                    </button>
                </li>
                <li>
                    <button *ngIf="runJob" class="btn btn-sm vt-btn btn-submit ng-star-inserted" type="button"
                        (click)="confirmRunJob()" [innerHTML]="'Chạy tay'">
                    </button>
                </li>
                <li>
                    <button *ngIf="runJob" class="btn btn-sm vt-btn btn-submit ng-star-inserted" type="button"
                        (click)="confirmKillJob()" [innerHTML]="'Kill tiến trình'">
                    </button>
                </li>
                <!-- <li>
                    <button class="btn btn-sm vt-btn btn-submit ng-star-inserted" type="button"
                        (click)="downloadLogFile()" [innerHTML]="'Tải file log'">
                    </button>
                </li> -->
            </ul>
        </div>
    </div>
</div>
<div class="info">
    <form id="formSave" [formGroup]="formSave">
        <div>
            <div class="panel panel-default card-info">
                <div class="panel-heading vt-relative">
                    <strong>
                        <span class="ml-2 title-info">Thông tin cấu hình tiến trình</span>
                    </strong>
                </div>
                <div class="panel-body padding-xl ui-g">
                    <div class="ui-g-12 vt-row">
                        <label  class="ui-g-12 ui-md-6 ui-lg-3 control-label vt-align-right required">
                            Tên
                        </label>
                        <div  class="ui-g-12 ui-md-6 ui-lg-3">
                            <input type="text" class="form form-control" name="name" formControlName="name"
                                maxlength="50" autocomplete="off">
                            <app-control-messages [control]="f['name']"></app-control-messages>
                        </div>

                        <label  class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right  required">
                            Lịch chạy
                        </label>
                        <div  class="ui-g-12 ui-md-6 ui-lg-3">
                            <input type="url"  class="form form-control" name="cronTabTimer"
                                formControlName="cronTabTimer" maxlength="50" autocomplete="off">
                            <app-control-messages [control]="f['cronTabTimer']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label  class="ui-g-12 ui-md-3 control-label vt-align-right required">
                            Đường dẫn log
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-lg-3">
                            <input type="url" class="form form-control" name="logPath" formControlName="logPath"
                                 autocomplete="off">
                            <app-control-messages [control]="f['logPath']"></app-control-messages>
                        </div>
                        <label  class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right  required">
                            Format tên file
                        </label>
                        <div  class="ui-g-12 ui-md-6 ui-lg-3">
                            <input type="text" class="form form-control" name="logSubfFix" formControlName="logSubfFix"
                                maxlength="50" autocomplete="off">
                            <app-control-messages [control]="f['logSubfFix']"></app-control-messages>
                        </div>
                    </div>

                    <div class="ui-g-12 vt-row">

                    </div>
                    <div class="ui-g-12 vt-row">
                        <label  class="ui-g-12 ui-md-3 control-label vt-align-right required">
                            Đường dẫn file bash shell
                        </label>
                        <div  class="ui-g-12 ui-md-6 ui-lg-3">
                            <input type="url" class="form form-control" name="runPath" formControlName="runPath"
                                maxlength="500" autocomplete="off">
                            <app-control-messages [control]="f['runPath']"></app-control-messages>
                        </div>
                        <label  class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right required">
                            IP server
                        </label>
                        <div  class="ui-g-12 ui-md-6 ui-lg-3">
                            <input type="text" class="form form-control" name="clusterCode"
                                formControlName="clusterCode" maxlength="50" autocomplete="off">
                            <app-control-messages [control]="f['clusterCode']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label  class="ui-g-12 ui-md-3 control-label vt-align-right required">
                            Thời gian chạy tối đa
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-lg-3">
                            <input type="text" class="form form-control" name="maxDuration"
                                formControlName="maxDuration" maxlength="50" autocomplete="off">
                                <app-control-messages [control]="f['maxDuration']"></app-control-messages>
                        </div>                        
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label  class="ui-g-12 ui-md-3 control-label vt-align-right">
                            Tổng thời gian chạy
                        </label>
                        <div  class="ui-g-12 ui-md-6 ui-lg-3">
                            <input type="text" class="form form-control" name="executionTime"
                                formControlName="executionTime" maxlength="50" autocomplete="off" disabled>
                        </div>

                        <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right">
                            Trạng thái
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-lg-3">                            
                            <select-filter [property]="f['processing']" optionValue="id"   optionLabel="name"
                                [options]="processingStatusList"  [disabled]="true">
                            </select-filter>
                            <app-control-messages [control]="f['processing']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-3 ui-lg-3 control-label vt-align-right">
                            Thời gian bắt đầu
                        </label>
                        <div class="ui-g-12 ui-md-3 ui-lg-3">
                            <date-picker [property]="f['dateLastRun']" type="" [disabled]='true' type="datetime">
                            </date-picker>
                            
                            <app-control-messages [control]="f['dateLastRun']"></app-control-messages>
                        </div>
                        <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right ">
                            Thời gian kết thúc
                        </label>
                        <div class="ui-g-12 ui-md-3 ui-lg-3">
                            <date-picker [property]="f['dateNextRun']" [disabled]='true' type="datetime">
                            </date-picker>
                            <app-control-messages [control]="f['dateNextRun']"></app-control-messages>
                        </div>
                    </div>

                    <div class="ui-g-12 vt-row">
                        <label  class="ui-g-12 ui-md-3 control-label vt-align-right">
                            Mô tả
                        </label>
                        <div  class="ui-g-12 ui-md-12 ui-lg-8">
                            <input type="text" class="form form-control" name="description"
                                formControlName="description" maxlength="500" autocomplete="off">
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-3 ui-lg-3 control-label vt-align-right">
                           Trạng thái
                        </label>
                        <div class="ui-g-12 ui-md-3 ui-lg-3">
                            <input type="checkbox" name="isActive" formControlName="isActive" style="width: 18px;
                height: 1.5rem;" [attr.disabled]="isView ? true : null">
                        </div>
                    </div>
                    <div>
                        <div style="width: 100%;">
                          <p-tabView class="tab-view">
                            <p-tabPanel header="Chi tiết">
                              <p-tabView class="tab-item">
                                <!-- Log chạy tiến trình -->
                                <p-tabPanel
                                        header="Lịch sử chạy tiến trình">
                                  <ad-scheduler-log [adSchedulerLogList]="formAdSchedulerLog.asObservable()">
                                  </ad-scheduler-log>
                                </p-tabPanel>
                              </p-tabView>
                            </p-tabPanel>                            
                          </p-tabView>
                        </div>
                      </div>

                </div>

            </div>
        </div>
    </form>
    <div *ngIf="(!hasPermission('action.update') && isUpdate) || (!hasPermission('action.insert') && isInsert)">
        {{'common.haveNoPermission' | translate}}
    </div>
</div>
