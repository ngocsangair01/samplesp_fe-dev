<div class="card-form">
  <div class="clearfix">
    <div class="left-nav-bar pull-left row-header">
      <div>
        <img alt="back" class="img-fluid" src="./../../../../../../assets/images/home/Mask_Group_18824.png" (click)="goBack();">
        <span *ngIf="!isView" class="title" translate> democraticmeeting.label.titleForm.update</span>
        <span *ngIf="isView" class="title" translate> democraticmeeting.label.titleForm.View</span>
      </div>
    </div>
    <div class="right-nav-bar pull-right left-option">
        <ul class="header-right sys-ul space-line">
          <li>
            <button class="btn btn-sm vt-btn mt-btn ng-star-inserted" type="button" (click)="goBack();" [innerHTML]="'common.button.out' | translate">
            </button>
          </li>
          <li *ngIf="!isView">
            <button class="btn btn-sm vt-btn btn-submit mt-btn ng-star-inserted" type="button" (click)="processSaveOrUpdate()" [innerHTML]="'common.button.icon.save' | translate">
            </button>
          </li>
        </ul>
    </div>
  </div>
</div>
<div class="info">
  <div class="panel panel-default card-info">
    <div class="panel-heading" translate>
      <strong>
        <!-- <span *ngIf="!isView" translate> democraticmeeting.label.titleForm.update</span>
        <span *ngIf="isView" translate> democraticmeeting.label.titleForm.View</span> -->
        <span class="ml-2 title-info">Thông tin họp dân chủ</span>
      </strong>
    </div>
    <form id="formSave" [formGroup]="formSave">
      <div class="panel-body padding-xl ui-g">
        <div class="ui-g-12 vt-row">
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right" [ngClass]="isView?'':'required'">
            {{'democraticmeeting.label.documentNumber' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3">
            <input type="text" class="form form-control" name="documentNumber" formControlName="documentNumber"
              maxlength="50" [attr.disabled]="isView?true:null" [autoFocus]="true">
            <app-control-messages [control]="f['documentNumber']"></app-control-messages>
          </div>
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right" [ngClass]="isView?'':'required'">
            {{'democraticmeeting.label.documentName' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3">
            <input type="text" class="form form-control" name="name" formControlName="name"
              maxlength="200" [attr.disabled]="isView?true:null">
            <app-control-messages [control]="f['name']"></app-control-messages>
          </div>
        </div>
        <div class="ui-g-12 vt-row">
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right" [ngClass]="isView?'':'required'">
            {{'democraticmeeting.label.organization' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3">
            <input type="text" class="form form-control" name="organizationName" formControlName="organizationName"
              maxlength="200" [attr.disabled]="true">
            <app-control-messages [control]="f['organizationName']"></app-control-messages>
          </div>
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right" [ngClass]="isView?'':'required'">
            {{'democraticmeeting.label.secretary' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3">
            <data-picker
            #data 
            [property]="f['employeeId']" 
            systemCode="political" 
            operationKey="action.view"
            adResourceKey="resource.requestDemocraticMeeting" 
            objectBO="EmployeeBO" 
            codeField="employeeCode" 
            nameField="fullName"
            emailField="email"
            mobileNumberField="mobileNumber"
            [isRequiredField]="true"
            selectField="employeeId" 
            [filterCondition]="' AND obj.status = 1'"
            [disabled]="isView"
            >
            </data-picker>
            <app-control-messages [control]="f['employeeId']"></app-control-messages>
          </div>
        </div>
        <div class="ui-g-12 vt-row">
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right" [ngClass]="isView?'':'required'">
            {{'democraticmeeting.label.dateMeeting' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3">
            <date-picker [property]="f['dateMeeting']"
            [disabled]="isView"
            >
            </date-picker>
            <app-control-messages [control]="f['dateMeeting']"></app-control-messages>
          </div>
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right" [ngClass]="isView?'':'required'">
            {{'democraticmeeting.label.meetingVenue' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3">
            <textarea [attr.disabled]="isView?true:null" type="text-area" rows="3" class="form-control" formControlName="meetingVenue" maxlength="500"></textarea>
            <app-control-messages [control]="f['meetingVenue']"></app-control-messages>
          </div>
        </div>
        <div class="ui-g-12 vt-row">
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right" [ngClass]="isView?'':'required'">
            {{'democraticmeeting.label.partyMeeting' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3" style="line-height: 32px;">
          <div class="form-check-inline ">
              <label class="i-checks">
                <input type="radio"class="form-check-input control-label" [attr.disabled]="isView?true:null" [value]="1" name="isMeeting" formControlName="isMeeting">
                <i></i>
                {{'democraticMeeting.isMeeting' | translate}}
              </label>
            </div>
            <div class="form-check-inline">
              <label class="i-checks">
                <input type="radio"class="form-check-input control-label" [attr.disabled]="isView?true:null" [value]="0" name="isMeeting" formControlName="isMeeting">
                <i></i>
                {{'democraticMeeting.notMeeting' | translate}}
              </label>
            </div>
            <app-control-messages [control]="f['isMeeting']"></app-control-messages>
          </div>
        </div>
      </div>
    </form>
    <div class="pannel-footer">
      <p-tabView class="tab-view">
        <!-- Thông tin Đảng, Đoàn, Tổ chức -->
        <p-tabPanel #compositionDialogueTab header="{{'democraticmeeting.label.ingredient' | translate}}" [selected]="true">
          <div class="border-tabpanel">
            <div class="panel-heading" translate >
              <strong>
                <span class="ml-2 title-info" translate>
                  democraticmeeting.title.orgMeeting
                </span>
              </strong>
            </div>
            <form id="formSave" [formGroup]="formEmployeesDiaglog">
              <div class="panel-body panel-table">
                <p-table [scrollable]="false" [value]="formEmployeesDiaglog.controls"
                  tableStyleClass="table controls-table table-wrapper b-t b-b">
                  <ng-template pTemplate="colgroup" let-columns>
                    <colgroup>
                      <col class="size-1">
                      <col class="size-6">
                      <col class="size-6">
                      <col class="size-6">
                      <col *ngIf="!isView" class="size-3">
                    </colgroup>
                  </ng-template>
                  <ng-template pTemplate="header">
                    <tr>
                      <th translate>common.table.index</th>
                      <th translate><span [ngClass]="isView?'':'required'">democraticmeeting.label.comrades</span></th>
                      <th translate><span [ngClass]="isView?'':'required'">democraticmeeting.label.position</span></th>
                      <th translate><span [ngClass]="isView?'':'required'">democraticmeeting.label.positionMeeting</span></th>
                      <th *ngIf="!isView" translate>common.label.action</th>
                    </tr>
                  </ng-template>
                  <ng-template pTemplate="body" let-item let-index="rowIndex">
                    <tr [formGroup]="item">
                      <td class="vt-align-center">
                        {{index+1}}
                      </td>
                      <td>
                        <data-picker 
                          [property]="item.controls.employeeId" 
                          systemCode="political" 
                          operationKey="action.view"
                          adResourceKey="resource.requestDemocraticMeeting" 
                          objectBO="EmployeeBO" 
                          codeField="employeeCode"
                          nameField="fullName"
                          emailField="email"
                          mobileNumberField="mobileNumber"
                          selectField="employeeId" 
                          [isRequiredField]="true"
                          (onChange)="loadUserInfo($event, item)" 
                          [filterCondition]="' AND obj.status = 1'"
                          [disabled]="isView"
                          >
                        </data-picker>
                        <app-control-messages [control]="item.controls.employeeId"></app-control-messages>
                      </td>
                      <td>
                        <input type="text" [attr.disabled]="true" formControlName="mainPositionName" name="mainPositionName"
                        class="form-control" maxlength="200">
                        <app-control-messages [control]="item.controls.mainPositionName"></app-control-messages>
                      </td>
                      <td class="vt-align-center">
                        <select-filter
                        [placeHolder]="'common.label.cboMustSelect'"
                        [property]="item.controls.meetingPositionId" 
                        [options]="positionMeetingOrgList" 
                        optionLabel="name"
                        optionValue="categoryId"
                        [disabled]="isView"
                        (onChange)="changeMeetingPosition($event)"
                        >
                      </select-filter>
                      <app-control-messages [control]="item.controls.meetingPositionId"></app-control-messages>
                      </td>
                      <td *ngIf="!isView" class="vt-align-center">
                        <button class="btn-icon plus" type="button" [title]="'titleAdd' | translate"
                          (click)="addEmp(index, item)" [innerHTML]="'common.icon.plus' | translate">
                        </button>
                        <button class="btn-icon minus" type="button" [title]="'titleDelete' | translate"
                          (click)="removeEmp(index, item)" [innerHTML]="'common.icon.minus' | translate">
                        </button>
                      </td>
                    </tr>
                  </ng-template>
                </p-table>
              </div>
            </form>
          </div>
          <div class="border-tabpanel">
            <div class="panel-heading"  translate >
              <strong>
                <span class="ml-2 title-info" translate>
                  democraticmeeting.label.BCHCDCS
                </span>
              </strong>
            </div>
            <form id="formSave" [formGroup]="formEmployeesBasis">
              <!-- BCH công đoàn cơ sở -->
                <div class="panel-body panel-table">
                  <p-table [scrollable]="false" [value]="formEmployeesBasis.controls"
                    tableStyleClass="table controls-table table-wrapper b-t b-b">
                    <ng-template pTemplate="colgroup" let-columns>
                      <colgroup>
                        <col class="size-1">
                        <col class="size-6">
                        <col class="size-6">
                        <col class="size-6">
                        <col *ngIf="!isView" class="size-3">
                      </colgroup>
                    </ng-template>
                    <ng-template pTemplate="header">
                      <tr>
                        <th translate>common.table.index</th>
                        <th translate><span  [ngClass]="isView?'':'required'">democraticmeeting.label.comrades</span></th>
                        <th translate><span  [ngClass]="isView?'':'required'">democraticmeeting.label.position</span></th>
                        <th translate><span  [ngClass]="isView?'':'required'">democraticmeeting.label.positionBCH</span></th>
                        <th *ngIf="!isView" translate>common.label.action</th>
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-item let-index="rowIndex">
                      <tr [formGroup]="item">
                        <td class="vt-align-center">
                          {{index+1}}
                        </td>
                        <td>
                          <data-picker 
                            [property]="item.controls.employeeId" 
                            systemCode="political" 
                            operationKey="action.view"
                            adResourceKey="resource.document" 
                            objectBO="EmployeeBO" 
                            codeField="employeeCode" 
                            nameField="fullName"
                            emailField="email"
                            mobileNumberField="mobileNumber"
                            selectField="employeeId"
                            [isRequiredField]="true"
                            (onChange)="loadUserInfo($event, item)" 
                            [filterCondition]="' AND obj.status = 1'" 
                            [disabled]="isView"
                            >
                          </data-picker>
                          <app-control-messages [control]="item.controls.employeeId"></app-control-messages>
                        </td>
                        <td>
                          <input type="text" [attr.disabled]="true" formControlName="mainPositionName" name="mainPositionName"
                          class="form-control" maxlength="200">
                          <app-control-messages [control]="item.controls.mainPositionName"></app-control-messages>
                        </td>
                        <td class="vt-align-center">
                            <select-filter
                            [placeHolder]="'common.label.cboMustSelect'"
                            [property]="item.controls.meetingPositionId" 
                            [options]="positionMeetingBasisList" 
                            optionLabel="name"
                            optionValue="categoryId"
                            [disabled]="isView"
                            (onChange)="changeMeetingPositionBasis($event)"
                            >
                          </select-filter>
                          <app-control-messages [control]="item.controls.meetingPositionId"></app-control-messages>
                        </td>
                        <td *ngIf="!isView" class="vt-align-center">
                          <button class="btn-icon plus" type="button" [title]="'titleAdd' | translate"
                            (click)="addEmpBasis(index, item)" [innerHTML]="'common.icon.plus' | translate">
                          </button>
                          <button class="btn-icon minus" type="button" [title]="'titleDelete' | translate"
                            (click)="removeEmpBasis(index, item)" [innerHTML]="'common.icon.minus' | translate">
                          </button>
                        </td>
                      </tr>
                    </ng-template>
                  </p-table>
                </div>
            </form>
          </div>
          <form id="formSave" [formGroup]="formWorker">
            <div class="border-tabpanel">
              <div class="panel-heading"  translate >
                <strong>
                  <span class="ml-2 title-info" translate>
                    democraticmeeting.label.worker
                  </span>
                </strong>
              </div>
              <div class="panel-body panel-table">
                <div class="ui-grid-row">
                  <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right" [ngClass]="isView?'':'required'">
                    {{'democraticmeeting.label.totalEmployee' | translate}}
                  </label>
                  <div class="ui-g-12 ui-md-3 ui-lg-3">
                    <input type="text" class="form form-control" name="totalEmployee" formControlName="totalEmployee"
                      maxlength="5" [attr.disabled]="isView?true:null" (keyup)="changeTotal()" >
                    <app-control-messages [control]="fD['totalEmployee']"></app-control-messages>
                  </div>
                  <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right" [ngClass]="isView?'':'required'">
                      {{'democraticmeeting.label.employeeList' | translate}}
                  </label>
                  <div class="ui-g-12 ui-md-3 ui-lg-3">
                    <file-chooser [property]="fD['files']" [validMaxSize]="50" validType="xls,xlsx,doc,docx" [disabled]="isView">
                    </file-chooser>
                    <app-control-messages [control]="fD['files']"></app-control-messages>
                  </div>
                </div>
                <div class="ui-grid-row">
                  <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right" [ngClass]="isView?'':'required'">
                    {{'democraticmeeting.label.totalEmployeeJoin' | translate}}
                  </label>
                  <div class="ui-g-12 ui-md-3 ui-lg-3">
                    <input type="text" class="form form-control" name="totalEmployeeAttending" formControlName="totalEmployeeAttending"
                      maxlength="5" [attr.disabled]="isView?true:null" (keyup)="changeTotal()" >
                    <app-control-messages [control]="fD['totalEmployeeAttending']"></app-control-messages>
                  </div>
                  <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right" >
                      {{'democraticmeeting.label.totalEmployeeAbsent' | translate}}
                  </label>
                  <div class="ui-g-12 ui-md-3 ui-lg-3">
                    <input type="text" class="form form-control" name="totalEmployeeAbsent" formControlName="totalEmployeeAbsent"
                      maxlength="5" [attr.disabled]="true">
                    <app-control-messages [control]="fD['totalEmployeeAbsent']"></app-control-messages>
                  </div>
                </div>
                <div class="ui-grid-row">
                  <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right" [ngClass]="isView?'':'required'">
                    {{'democraticmeeting.label.absentReason' | translate}}
                  </label>
                  <div class="ui-g-12 ui-md-3 ui-lg-8">
                      <textarea rows="3" class="form form-control" name="absentReason" formControlName="absentReason" maxlength="500" [attr.disabled]="isView?true:null"></textarea>
                      <app-control-messages [control]="fD['absentReason']"></app-control-messages>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </p-tabPanel>
        <p-tabPanel #contentDialogueTab header="{{'democraticmeeting.label.contentDialogue' | translate}}">
        <div class="border-tabpanel">
          <div class="panel-heading" translate>
            <strong>
              <span class="ml-2 title-info" translate>
                democraticmeeting.label.contentDialogue
              </span>
            </strong>
          </div>
          <form id="formSave" [formGroup]="formContentDialogue">
            <div class="panel-body panel-table">
                <div class="ui-grid-row">
                  <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right" [ngClass]="isView?'':'required'">
                    {{'democraticmeeting.label.totalQuestion' | translate}}
                  </label>
                  <div class="ui-g-12 ui-md-3 ui-lg-3">
                    <input type="text" class="form form-control" name="totalQuestion" formControlName="totalQuestion"
                      maxlength="5" [attr.disabled]="isView?true:null" (keyup)="changeTotalQuestion()" >
                    <app-control-messages [control]="fCD['totalQuestion']"></app-control-messages>
                  </div>
                  <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
                      {{'democraticmeeting.label.totalQuestionUnanswered' | translate}}
                  </label>
                  <div class="ui-g-12 ui-md-3 ui-lg-3">
                    <input type="text" class="form form-control" name="totalQuestionUnanswered" formControlName="totalQuestionUnanswered"
                      maxlength="5" [attr.disabled]="true"  >
                    <app-control-messages [control]="fCD['totalQuestionUnanswered']"></app-control-messages>
                  </div>
                </div>
                <div class="ui-grid-row">
                  <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right" [ngClass]="isView?'':'required'">
                    {{'democraticmeeting.label.totalQuestionAnswered' | translate}}
                  </label>
                  <div class="ui-g-12 ui-md-3 ui-lg-3">
                    <input type="text" class="form form-control"  name="totalQuestionAnswered" formControlName="totalQuestionAnswered"
                      maxlength="5" [attr.disabled]="isView?true:null" (keyup)="changeTotalQuestion()"  >
                    <app-control-messages [control]="fCD['totalQuestionAnswered']"></app-control-messages>
                  </div>
                </div>
              </div>
            <p-editor formControlName="contentDialogue" [readonly]="isView" [style]="{'height':'320px'}"></p-editor>
            <app-control-messages [control]="fCD['contentDialogue']"></app-control-messages>
          </form>
          </div>
        </p-tabPanel>
        <p-tabPanel #implementationOrganizationTab header="{{'democraticmeeting.label.implementationOrganization' | translate}}">
          <div class="panel-heading" translate>
            <strong>
              <span class="ml-2 title-info" translate>
                democraticmeeting.label.implementationOrganization
              </span>
            </strong>
          </div>
          <form id="formSave" [formGroup]="formImplementationOrganization">
            <p-editor formControlName="implementationOrganization" [readonly]="isView" [style]="{'height':'320px'}"></p-editor>
            <app-control-messages [control]="fI['implementationOrganization']"></app-control-messages>
          </form>
        </p-tabPanel>
      </p-tabView>
  </div>
</div>