<div class="info">
  <div class="panel panel-default">
    <form id="formSave" [formGroup]="formSave">
      <div class="panel-heading vt-relative">
        <strong>
          <span class="ml-2 title-info">{{'label.welfare.policy.proposal.popUp' |translate}}</span>
        </strong>
      </div>
      <div class="panel-body padding-xl ui-g">
        <div class="ui-g-12 vt-row">
          <label class="ui-g-12 ui-md-6 ui-lg-4 control-label vt-align-right">
            {{'common.label.employee' | translate}}
          </label>
<!--          fix tạm thời-->
          <input type="text" class="form-control k-display-none" >
          <div class="ui-g-12 ui-md-6 ui-lg-4">
            <data-picker
                    #data
                    [property]="f['receiverEmployeeId']"
                    systemCode="political"
                    operationKey="action.view"
                    adResourceKey="resource.welfarePolicyProposal"
                    objectBO="EmployeeBO"
                    codeField="employeeCode"
                    nameField="fullName"
                    emailField="email"
                    mobileNumberField="mobileNumber"
                    selectField="employeeId"
                    isPartyMember="'true'"
                    type="employee"
                    (onChange)="callDataForTable()">
            </data-picker>
            <app-control-messages [control]="f['receiverEmployeeId']"></app-control-messages>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>

<div id="listArea" [ngClass]="isShowVertical?'display-list-vertical':''"
     [ngStyle]="{'width': isShowVertical && !isShowHideVertical ? '100%' : '','height': isShowVertical && !isShowHideVertical ? '85vh' : ''}">
  <div [ngClass]="isShowVertical?'panel panel-default display-max-vertical-height':'panel panel-default'">
    <div class="panel-body panel-table table-container">
      <p-table
          #ptable
          [value]="list.controls"
          [paginator]="true"
          [(first)]="firstRowIndex"
          [rows]="pageSize"
          [totalRecords]="list.length"
          [scrollable]="true"
          [resizableColumns]="true"
          class="custom-table"
          tableStyleClass="table table-wrapper table-hover table-striped b-t b-b"
          styleClass="controlOverflow"
      >
        <ng-template pTemplate="colgroup" let-columns>
          <colgroup>
            <col style="width: 50px;">
            <col style="width: 50px;">
            <col style="width: 50px;" style="display:none;">
            <col style="width: 150px;">
            <col style="width: 150px;">
            <col style="width: 150px;">
            <col style="width: 150px;">
            <col style="width: 150px;">
            <col style="width: 150px;">
            <col style="width: 150px;">
            <col style="width: 150px;">
            <col style="width: 150px;">
          </colgroup>
        </ng-template>
        <ng-template pTemplate="header">
          <tr>
            <th pResizableColumn translate>common.table.index</th>
            <th pResizableColumn translate>common.button.chose</th>
            <th pResizableColumn style="display:none;">
            <th pResizableColumn>
              {{'label.welfare.policy.request.employee' | translate}}
            </th>
            <th pResizableColumn>
              {{'label.welfare.policy.request.welfarePolicyCategory' | translate}}
            </th>
            <th pResizableColumn>
              {{'label.welfare.policy.category.objectType' | translate}}
            </th>
            <th pResizableColumn>
              {{'label.welfare.policy.category.relationship' | translate}}
            </th>
            <th pResizableColumn>
              {{'label.welfare.policy.request.objectName' | translate}}
            </th>
            <th pResizableColumn>
              {{'label.welfare.policy.request.requestDate' | translate}}
            </th>
            <th pResizableColumn>
              {{'label.welfare.policy.request.status' | translate}}
            </th>
            <th pResizableColumn>
              {{'label.welfare.policy.request.chairmanType' | translate}}
            </th>
            <th pResizableColumn>
              {{'rewardPropose.reimbursement.totalAmount' | translate}}
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item let-index="rowIndex">
          <tr [formGroup]="item">
            <td class="vt-align-center">{{index}}</td>
            <td class="vt-align-center">
              <input type="checkbox" name="isCheck"
                     formControlName="isCheck"
                     [value]="1"/>
            </td>
            <td class="vt-align-center" style="display:none;">{{item.value.welfarePolicyRequestId}}</td>
            <td class="vt-align-left" [title]="item.value.employeeName"><span [innerHTML]="item.value.employeeName"></span></td>
            <td class="vt-align-left" [title]="item.value.welfarePolicyCategoryName">{{item.value.welfarePolicyCategoryName}}</td>
            <td class="vt-align-left" [title]="item.value.objectType">{{item.value.objectType}}</td>
            <td class="vt-align-left" [title]="item.value.relationshipName">{{item.value.relationshipName}}</td>
            <td class="vt-align-left" [title]="item.value.objectName">{{item.value.objectName}}</td>
            <td class="vt-align-left " [title]="item.value.requestDate">{{item.value.requestDate | date: 'dd/MM/yyyy'}}</td>
            <td class="vt-align-left " [title]="item.value.status">{{item.value.status}}</td>
            <td class="vt-align-left " [title]="item.value.chairmanTypeName">{{item.value.chairmanTypeName}}</td>
            <td class="vt-align-left " [title]="item.value.amountTotal">{{item.value.amountTotal}}</td>
          </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
          <tr class="emptymessage">
            <td [attr.colspan]="12" [innerHTML]="'app.noRecords' | translate">
            </td>
          </tr>
        </ng-template>
        <ng-template pTemplate="paginatorleft" >
          <div class="table-footer-sumary">
              <span *ngIf="list.length < pageSize && list.length > 0">
                {{'common.tableSumary.find' | translate}} {{list.length}}, {{'common.tableSumary.showAll' | translate}}
              </span>
            <span *ngIf="list.length >= pageSize && firstRowIndex+pageSize <= list.length">
                {{'common.tableSumary.find' | translate}} {{list.length}}, {{'common.tableSumary.showFrom' | translate}}
              {{firstRowIndex + 1}} {{'common.tableSumary.showTo' | translate}}
              {{firstRowIndex + pageSize}}
              </span>
            <span *ngIf="list.length >= pageSize && firstRowIndex+pageSize > list.length">
                {{'common.tableSumary.find' | translate}} {{list.length}}, {{'common.tableSumary.showFrom' | translate}}
              {{firstRowIndex + 1}} {{'common.tableSumary.showTo' | translate}}
              {{list.length}}
              </span>
          </div>
        </ng-template>
      </p-table>
    </div>
  </div>
  <div class="panel-footer vt-area-button">
    <button type="submit" (click)="addRequest()" class="btn btn-sm vt-btn btn-submit"
            [innerHTML]="'common.button.icon.save' | translate"></button>
    <button type="button"  class="btn btn-sm vt-btn"  (click)="activeModal.close()"
            [innerHTML]="'common.button.out' | translate"></button>
  </div>
</div>
