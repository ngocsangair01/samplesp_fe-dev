<div class="card-form">
  <div class="clearfix">
    <div class="left-nav-bar pull-left row-header">
      <div>
        <img alt="back" class="img-fluid" src="./../../../../../../assets/images/home/Mask_Group_18824.png" (click)="goBack();">
        <span *ngIf="!update" class="title">{{'propaganda.thoughtReportTitle.add' | translate}}</span>
        <span *ngIf="update" class="title">{{'propaganda.thoughtReportTitle.update' | translate}}</span>
      </div>
    </div>
    <div class="right-nav-bar pull-right left-option">
        <ul class="header-right sys-ul space-line">
          <li>
            <button class="btn btn-sm vt-btn mt-btn ng-star-inserted" type="button" (click)="goBack();" [innerHTML]="'common.button.out' | translate">
            </button>
          </li>
          <li>
            <button class="btn btn-sm vt-btn btn-submit mt-btn ng-star-inserted" type="button" (click)="processSaveOrUpdate()" [innerHTML]="'common.button.icon.save' | translate">
            </button>
          </li>
        </ul>
    </div>
  </div>
</div>
<div class="info">
  <div class="panel panel-default card-info">
    <form id="formSave" [formGroup]="formSave">
      <div class="panel-heading vt-relative">
        <strong>
          <!-- <span *ngIf="!update">{{'propaganda.thoughtReportTitle.add' | translate}}</span>
          <span *ngIf="update">{{'propaganda.thoughtReportTitle.update' | translate}}</span> -->
          <span>Thông tin phản ánh báo cáo biểu hiện tư tưởng</span>
        </strong>
      </div>
      <div class="panel-body padding-xl ui-g">
        <!-- <div *ngIf="update" class="ui-g-12">
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
            {{'propaganda.thoughtReport.codeThought' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3">
            <input type="text" name="eovListCode" class="form-control" [attr.disabled]="true"
              formControlName="eovListCode">
          </div>
        </div> -->
        <div class="ui-g-12 vt-row">
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right required">
            {{'propaganda.thoughtReport.unitReport' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3">
            <org-selector [property]="f['orgEovId']" [operationKey]="operationKey" [adResourceKey]="adResourceKey"
              [defaultValue]="true" (onChange)="getUnitParent()" [disabled]="update?true:null">
            </org-selector>
            <app-control-messages [control]="f['orgEovId']"></app-control-messages>
          </div>
          <label class="ui-g-12 ui-md-3 ui-lg-3 control-label vt-align-right required">
            {{'propaganda.thoughtReport.officersReport' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-1">
            <label class="i-switch bg-info m-t-xs m-r" id="showOrgExpried">
              <input type="checkbox" name="synthetic" [value]="checkEmplyee" (change)="onChangeIsEmployee($event)"
                [attr.disabled]="update?true:null" />
              <i></i>
            </label>
          </div>
          <div *ngIf="!checkEmplyee" class="ui-g-12 ui-md-3 ui-lg-2">
            <data-picker [property]="f['employeeId']" systemCode="political" [operationKey]="operationKey"
              [adResourceKey]="adResourceKey" objectBO="EmployeeBO" codeField="employeeCode" nameField="fullName"
              emailField="email" selectField="employeeId" isNotSearchByOrgDomainData="true" [propertyName]="f['reporter']"
              mobileNumberField="mobileNumber">
            </data-picker>
            <app-control-messages [control]="f['employeeId']"></app-control-messages>
          </div>
          <div *ngIf="checkEmplyee" class="ui-g-12 ui-md-3 ui-lg-2">
            <input type="text" class="form form-control" formControlName="reporter" [attr.disabled]="update?true:null"
              maxlength="200">
            <app-control-messages [control]="f['reporter']"></app-control-messages>
          </div>
        </div>
        <div class="ui-g-12 vt-row">
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right required">
            {{'propaganda.thoughtReport.nameBehavior' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-9">
            <textarea formControlName="eovListName" id="name" type="text-area" cols="200" rows="3" class="form-control"
              maxlength="200"></textarea>
            <app-control-messages [control]="f['eovListName']"></app-control-messages>
          </div>
        </div>
        <!-- <div class="ui-g-12">
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right required">
            {{'propaganda.thoughtReport.groupBehavior' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3">
            <select-filter [property]="f['categoryTypeId']" [options]="groupTypeOfExpressionList" optionLabel="name"
              optionValue="categoryTypeId" [placeHolder]="'common.label.cboMustSelect'" [autoFocus]="false"
              (onChange)="getTypeOfExpression()">
            </select-filter>
            <app-control-messages [control]="f['categoryTypeId']"></app-control-messages>
          </div>
          <label class="ui-g-12 ui-md-3 ui-lg-3 control-label vt-align-right required">
            {{'propaganda.thoughtReport.typeBehavior' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3">
            <select-filter [property]="f['categoryId']" [options]="typeOfExpressionList" optionLabel="name"
              optionValue="categoryId" [placeHolder]="'common.label.cboMustSelect'" [autoFocus]="false">
            </select-filter>
            <app-control-messages [control]="f['categoryId']"></app-control-messages>
          </div>
        </div> -->
        <div class="ui-g-12 ">
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-9">
            <p-table [scrollable]="false" [value]="listFormEovCategory.controls" styleClass="controlOverflow"
              tableStyleClass="table controls-table table-wrapper b-t b-b">
              <ng-template pTemplate="colgroup" let-columns>
                <colgroup>
                  <col class="size-1">
                  <col *ngIf="update" class="size-12">
                  <col class="size-12">
                  <col class="size-12">
                  <col class="size-3" *ngIf="!isView">
                </colgroup>
              </ng-template>
              <ng-template pTemplate="header">
                <tr>
                  <th>STT</th>
                  <th *ngIf="update">{{'propaganda.thoughtReport.codeThought' | translate}}</th>
                  <th>
                    <label class="required">
                      {{'propaganda.thoughtReport.groupBehavior' | translate}}
                    </label>
                  </th>
                  <th>
                    <label class="required">
                      {{'propaganda.thoughtReport.typeBehavior' | translate}}
                    </label>
                  </th>
                  <th *ngIf="!isView">{{'fundContribution.lable.action' | translate}}</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-item let-index="rowIndex">
                <tr [formGroup]="item">
                  <td class="vt-align-center">
                    {{index+1}}
                  </td>
                  <td *ngIf="update" class="vt-align-center">
                    <input type="text" class="form form-control" formControlName="code" [attr.disabled]="update?true:null"
              maxlength="200">
                  </td>
                  <td>
                    <select-filter [property]="item.controls.categoryTypeId" [options]="groupTypeOfExpressionList"
                      optionLabel="name" optionValue="categoryTypeId" [placeHolder]="'common.label.cboMustSelect'"
                      [autoFocus]="false" (onChange)="getTypeOfExpression(item)">
                    </select-filter>
                    <app-control-messages [control]="item.controls.categoryTypeId"></app-control-messages>
                  </td>
                  <td class="vt-align-center">
                    <select-filter [property]="item.controls.categoryId"
                      [options]="mapCategoryByExpressionList[item.controls.categoryTypeId.value]" optionLabel="name" optionValue="categoryId"
                      [placeHolder]="'common.label.cboMustSelect'" [autoFocus]="false">
                    </select-filter>
                    <app-control-messages [control]="item.controls.categoryId"></app-control-messages>
                  </td>
                  <td class="vt-align-center" *ngIf="!isView">
                    <button type="button" class="btn-icon plus" [title]="'titleAdd' | translate"
                      (click)="addRow(index, item)" [innerHTML]="'common.icon.plus' | translate">
                    </button>
                    <button type="button" class="btn-icon minus" [title]="'titleDelete' | translate"
                      (click)="removeRow(index, item)" [innerHTML]="'common.icon.minus' | translate">
                    </button>
                  </td>
                </tr>
              </ng-template>
            </p-table>
          </div>
        </div>
        <div class="ui-g-12 vt-row">
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right required">{{'propaganda.thoughtReport.level'
            | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3" style="line-height: 32px;">
            <div class="form-check-inline ">
              <label class="i-checks">
                <input type="radio" class="form-check-input control-label" id="level_1" [value]="1" name="eovTypeLevel"
                  formControlName="eovTypeLevel">
                <i></i>
                {{'propaganda.thoughtReport.level1' | translate}}
              </label>
            </div>
            <div class="form-check-inline">
              <label class="i-checks">
                <input type="radio" class="form-check-input control-label" id="level_2" [value]="2" name="eovTypeLevel"
                  formControlName="eovTypeLevel">
                <i></i>
                {{'propaganda.thoughtReport.level2' | translate}}
              </label>
            </div>
            <div class="form-check-inline ">
              <label class="i-checks">
                <input type="radio" class="form-check-input control-label" id="level_3" [value]="3" name="eovTypeLevel"
                  formControlName="eovTypeLevel">
                <i></i>
                {{'propaganda.thoughtReport.level3' | translate}}
              </label>
            </div>
            <app-control-messages [control]="f['eovTypeLevel']"></app-control-messages>
          </div>
          <label class="ui-g-12 ui-md-3 ui-lg-3 control-label vt-align-right required">
            {{'propaganda.thoughtReport.time' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3">
            <date-picker [property]="f['eovTime']">
            </date-picker>
            <app-control-messages [control]="f['eovTime']"></app-control-messages>
          </div>
        </div>
        <div class="ui-g-12 vt-row">
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
            {{'propaganda.thoughtDescriptionHas' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-9">
            <textarea formControlName="description" id="description" type="text-area" rows="3" class="form-control"
              maxlength="500" [placeholder]="'propaganda.placeHolder.description' | translate"></textarea>
            <app-control-messages [control]="f['description']"></app-control-messages>
          </div>
        </div>
        <div class="ui-g-12 vt-row">
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
            {{'propaganda.thoughtReport.file' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3">
            <multi-file-chooser [property]="f['files']" fileName="fileAttachment" [validMaxSize]="50"
              (onFileChange)="changeFile($event)" validType="png,jpg,gif,tiff,bmp,xls,xlsx,doc,docx,pdf,rar,zip,7z">
            </multi-file-chooser>
          </div>
        </div>
        <div class="ui-g-12 vt-row">
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
            {{'propaganda.thoughtReport.listEmployeeHas' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-9">
            <multi-data-picker [property]="f['listIdEmployeeNVVP']" systemCode="political" [operationKey]="operationKey"
              [adResourceKey]="adResourceKey" objectBO="EmployeeBO" codeField="employeeCode" nameField="fullName"
              emailField="email" selectField="employeeId" isNotSearchByOrgDomainData="true"
              [filterCondition]="employeeFilterCondition">
            </multi-data-picker>
          </div>
        </div>
        <div class="ui-g-12 vt-row">
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
            {{'propaganda.thoughtReport.listUniteHas' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-9">
            <multi-org-selector [property]="f['listIdOrgDVVP']" [operationKey]="operationKey"
              [adResourceKey]="adResourceKey">
            </multi-org-selector>
          </div>
        </div>
        <div class="ui-g-12 vt-row">
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
            {{'propaganda.thoughtReport.infoEmployee' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-9">
            <multi-data-picker [property]="f['listIdEmployeeLQ']" systemCode="political" [operationKey]="operationKey"
              [adResourceKey]="adResourceKey" objectBO="EmployeeBO" codeField="employeeCode" nameField="fullName"
              emailField="email" selectField="employeeId" isNotSearchByOrgDomainData="true"
              [filterCondition]="employeeFilterCondition">
            </multi-data-picker>
          </div>
        </div>
        <div class="ui-g-12 vt-row">
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right required">
            {{'propaganda.thoughtReport.orgUnitHandle' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-9">
            <multi-org-selector [property]="f['listDvgq']" [operationKey]="operationKey" [adResourceKey]="adResourceKey">
            </multi-org-selector>
            <app-control-messages [control]="f['listDvgqRequired']"></app-control-messages>
          </div>
        </div>
        <div class="ui-g-12 vt-row">
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
            {{'propaganda.thoughtReport.employeeNotRecievedRelated' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-9">
            <multi-data-picker [property]="f['listIdEmployeeKNTN']" systemCode="political" [operationKey]="operationKey"
              [adResourceKey]="adResourceKey" objectBO="EmployeeBO" codeField="employeeCode" nameField="fullName"
              emailField="email" selectField="employeeId" isNotSearchByOrgDomainData="true"
              [filterCondition]="employeeFilterCondition" (onChange)="changeEmployeeKNTN()">
            </multi-data-picker>
          </div>
        </div>
        <div class="ui-g-12 vt-row">
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
            {{'propaganda.thoughtReport.listEmployeeRecievedRelated' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-9">
            <multi-data-picker [property]="f['listIdEmployeeNTN']" systemCode="political" [operationKey]="operationKey"
              [adResourceKey]="adResourceKey" objectBO="EmployeeBO" codeField="employeeCode" nameField="fullName"
              emailField="email" selectField="employeeId" isNotSearchByOrgDomainData="true"
              [filterCondition]="employeeFilterCondition" (onChange)="changeEmployeeNTN()">
            </multi-data-picker>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>