<div class="card-form">
  <div class="clearfix">
    <div class="left-nav-bar pull-left row-header">
      <div>
        <img alt="back" class="img-fluid" src="./../../../../../../assets/images/home/Mask_Group_18824.png" (click)="goBack();">
        <span *ngIf="!formSave.get('fundContributionId').value" class="title" translate>fundContribution.lable.addNewFund</span>
        <span *ngIf="formSave.get('fundContributionId').value && isView === false" class="title"
          translate>fundActivity.label.editContribution</span>
        <span *ngIf="formSave.get('fundContributionId').value && isView === true" class="title"
          translate>fundActivity.label.viewContribution</span>
      </div>
    </div>
    <div class="right-nav-bar pull-right left-option">
        <ul class="header-right sys-ul space-line">
          <li>
            <button class="btn btn-sm vt-btn mt-btn ng-star-inserted" type="button" (click)="goBack();" [innerHTML]="'common.button.out' | translate">
            </button>
          </li>
          <li *ngIf="!isView">
            <button class="btn btn-sm vt-btn btn-submit mt-btn ng-star-inserted" type="button" (click)="processSaveOrUpdate()" [innerHTML]="'common.button.icon.save' | translate">
            </button>
          </li>
          <li *ngIf="isView">
            <button class="btn btn-sm vt-btn btn-submit mt-btn btn-header-right ng-star-inserted" type="button" (click)="navigate()" [innerHTML]="'common.button.icon.edit' | translate">
            </button>
          </li>
        </ul>
    </div>
  </div>
</div>
<div class="info">
  <div class="panel panel-default card-info">
    <form id="formSave" [formGroup]="formSave">
      <div class="panel-heading vt-relative">
        <strong>
          <!-- <span *ngIf="!formSave.get('fundContributionId').value" translate>fundContribution.lable.addNewFund</span>
          <span *ngIf="formSave.get('fundContributionId').value && isView === false"
            translate>fundActivity.label.editContribution</span>
          <span *ngIf="formSave.get('fundContributionId').value && isView === true"
            translate>fundActivity.label.viewContribution</span> -->
          <span class="ml-2 title-info">Thông tin nộp quỹ</span>
        </strong>
      </div>
  
      <!-- trường thêm mới  -->
      <div class="panel-body padding-xl ui-g">
        <div class="ui-g-12 vt-row">
          <!-- trường người nộp -->
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right required">
            {{'fundContribution.lable.NameMember'|translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3">
            <data-picker  [property]="f['employeeId']" systemCode="political" operationKey="action.view"
              adResourceKey="resource.partyMember" objectBO="EmployeeBO" codeField="employeeCode" nameField="fullName"
              emailField="email" mobileNumberField="mobileNumber" selectField="employeeId" [disabled]="isView"
              [isRequiredField]="true">
            </data-picker>
            <app-control-messages [control]="f['employeeId']"></app-control-messages>
          </div>
          <!-- trường đươn vị nộp -->
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right" [ngClass]="isView?'':'required'">
            {{'fundContribution.lable.name'|translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3">
            <org-selector [property]="f['organizationId']" operationKey="action.view"
              adResourceKey="resource.fundManagement" [defaultValue]="false" [disabled]="isView" 
              [isRequiredField]="true">
            </org-selector>
            <app-control-messages [control]="f['organizationId']"></app-control-messages>
          </div>
        </div>
        <div class="ui-g-12 vt-row">
          <!-- loại quỹ -->
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right" [ngClass]="isView?'':'required'">
            {{'fundManagement.label.fundType'|translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3">
            <select-filter [placeHolder]="'common.label.cboMustSelect'" [property]="f['fundTypeId']"
              [options]="fundTypeList" optionLabel="name" (onChange)="setDataForm()" optionValue="fundTypeId" [disabled]="isView">
            </select-filter>
            <app-control-messages [control]="f['fundTypeId']"></app-control-messages>
          </div>
          <!-- đơn vị quản lý -->
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right" [ngClass]="isView?'':'required'">
            {{'fundManagement.label.organizationName'|translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3">
            <org-selector [property]="f['fundOrganizationId']" (onChange)="setDataForm()" operationKey="action.view"
              adResourceKey="resource.fundManagement" [defaultValue]="false" [disabled]="isView"
              isRequiredField="false">
            </org-selector>
            <app-control-messages [control]="f['fundOrganizationId']"></app-control-messages>
          </div>
        </div>
        <div class="ui-g-12 vt-row">
          <!-- tên quỹ  -->
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right " [ngClass]="isView?'':'required'">
            {{'fundContribution.lable.namefund' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3">
            <input type="text" class="form form-control" name="fundName" formControlName="fundName" disabled>
            <app-control-messages [control]="f['fundName']"></app-control-messages>
          </div>
          <!-- ngày nộp  -->
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right required">
            {{'fundContribution.lable.Day' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3">
            <date-picker [property]="f['contributedDate']" [disabled]='isView'>
            </date-picker>
            <app-control-messages [control]="f['contributedDate']"></app-control-messages>
          </div>
        </div>
        <!-- bảng  -->
        <div class="ui-g-12 vt-row">
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
          </label>
          <div class="ui-g-12 ui-md-9 ui-lg-8">
            <p-table [scrollable]="true" [value]="lstFormOrgRelationConfig.controls" styleClass="controlOverflow"
              tableStyleClass="table controls-table table-wrapper b-t b-b"
              [resizableColumns]="true">
              <ng-template pTemplate="colgroup" let-columns>
                <colgroup>
                  <col style="width: 50px;">
                  <col style="width: 200px;">
                  <col style="width: 100px;">
                  <col style="width: 100px;">
                  <col style="width: 100px;" *ngIf="!isView">
                </colgroup>
              </ng-template>
              <ng-template pTemplate="header">
                <tr>
                  <th pResizableColumn>STT</th>
                  <th pResizableColumn>
                    <label class="required">
                      {{'fundContribution.lable.moth' | translate}}
                    </label>
                  </th>
                  <th pResizableColumn>
                    <label class="required">
                      {{'fundContribution.lable.NumberberMoney' | translate}}
                    </label>
                  </th>
                  <th pResizableColumn>
                    <label class="required">
                      {{'fundContribution.lable.NumberberMember' | translate}}
                    </label>
                  </th>
                  <th pResizableColumn *ngIf="!isView">{{'fundContribution.lable.action' | translate}}</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-item let-index="rowIndex">
                <tr [formGroup]="item">
                  <td class="vt-align-center">
                    {{index+1}}
                  </td>
                  <td>
                    <date-picker [property]="item.controls.contributedMonth" [view]="'month'" [disabled]='isView'>
                    </date-picker>
                    <app-control-messages [control]="item.controls.contributedMonth"></app-control-messages>
                  </td>
                  <td class="vt-align-center">
                    <input type="text" class="form form-control" [attr.disabled]="isView?true:null"
                      name="contributedMoney" maxlength="15" formControlName="contributedMoney" (ngModelChange) ="total($event)">
                    <app-control-messages [control]="item.controls.contributedMoney" ></app-control-messages>
                  </td>
                  <td class="vt-align-center">
                    <input type="text" class="form form-control" name="contributedMember" maxlength="10" formControlName="contributedMember"
                      [attr.disabled]="isView?true:null" (ngModelChange) ="totalMember($event)">
                    <app-control-messages [control]="item.controls.contributedMember" ></app-control-messages>
                  </td>
                  <td class="vt-align-center" *ngIf="!isView">
                    <button type="button" class="btn-icon plus" [title]="'titleAdd' | translate"
                      (click)="addRow(index, item)" [innerHTML]="'common.icon.plus' | translate">
                    </button>
                    <button type="button" class="btn-icon minus" [title]="'titleDelete' | translate"
                      (click)="removeRow(index, item)" [innerHTML]="'common.icon.minus' | translate">
                    </button>
                  </td>
                </tr>
              </ng-template>
  
  
            </p-table>
          </div>
        </div>
        <div class="ui-g-12 vt-row">
          <!-- tổng số lượt -->
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
            {{'fundContribution.lable.SumName'|translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3">
            <input type="text" class="form form-control" name="totalMember" maxlength="10" formControlName="totalMember" disabled >
          </div>
          <!-- tổng số tiền nộp  -->
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right ">
            {{'fundContribution.lable.totalMember' | translate}}
          </label>
          <div class="ui-g-12 ui-md-3 ui-lg-3">
            <input type="text" class="form form-control" name="totalMoney" formControlName="totalMoney" disabled >
          </div>
        </div>
        <div clas="ui-g-12">
          <!-- file đính kèm  -->
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
            {{'common.label.attachmentFile' | translate}}
          </label>
          <div class="ui-g-12 ui-md-9 ui-lg-8">
            <p-table [scrollable]="false" [value]="lstFormNoteFileConfig.controls" styleClass="controlOverflow"
              tableStyleClass="table controls-table b-t b-b">
              <ng-template pTemplate="colgroup" let-columns>
                <colgroup>
                  <col class="size-12">
                  <col class="size-12">
                  <col class="size-3" *ngIf="!isView">
                </colgroup>
              </ng-template>.
              <ng-template pTemplate="body" let-item let-index="rowIndex">
                <tr [formGroup]="item">
                  <td>
                    <input type="text" class="form form-control" maxlength="200" name="name" formControlName="name"  [attr.disabled]="isView?true:null">
                    <app-control-messages [control]="item.controls.name"></app-control-messages>
                  </td>
                  <td class="vt-align-center">
                    <file-chooser 
                      [property]="item.controls.files"
                      fileName="fileAttachment"
                      [disabled]="isView"
                      [htmlId]="'filesControl' + index"
                      validMaxSize="50"
                      validType="png,jpg,gif,tiff,bmp,xls,xlsx,doc,docx,pdf,rar,zip,7z"
                      >
                    </file-chooser>
                    <app-control-messages [control]="item.controls.files"></app-control-messages>
                  </td>
                  <td class="vt-align-center" *ngIf="!isView">
                    <button type="button" [title]="'titleAdd' | translate" (click)="addRowFile(item)" 
                          class="btn-icon plus" [innerHTML]="'common.icon.plus' | translate"></button>
                        <button type="button" [title]="'titleDelete' | translate" (click)="removeRowFile(item)" 
                          class="btn-icon minus" [innerHTML]="'common.icon.minus' | translate"></button>
                  </td>
                </tr>
              </ng-template>
            </p-table>
          </div>
        </div>
        <div class="ui-g-12 vt-row">
          <!-- nội dung chuyển tiền -->
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
            {{'fundContribution.lable.MoneyContent' | translate}}
          </label>
          <div class="ui-g-12 ui-md-9 ui-lg-8">
            <textarea name="content" formControlName="content" id="content" class="form-control" rows="3"
              maxlength="1000" [attr.disabled]="isView? true : null" [placeholder]="'fundActivity.placeholder.MoneyContent' | translate"></textarea>
            <app-control-messages [control]="f['content']"></app-control-messages>
          </div>
        </div>
        <div class="ui-g-12 vt-row">
          <!-- ghi chú -->
          <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
            {{'fundContribution.lable.note' | translate}}
          </label>
          <div class="ui-g-12 ui-md-9 ui-lg-8">
            <textarea name="note" formControlName="note"  id="note" class="form-control" rows="3"
              maxlength="1000" [attr.disabled]="isView? true : null"></textarea>
            <app-control-messages [control]="f['note']"></app-control-messages>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>