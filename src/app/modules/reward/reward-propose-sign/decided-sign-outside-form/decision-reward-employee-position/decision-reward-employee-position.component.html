<div id="header-search" style="margin-right: 0.75rem; display: flex; justify-content: flex-end;">
  <div class="vt-relative">
    <form [formGroup]="formSearchNguoiHuong">
      <div class="display-table" style="border: 1px solid rgba(246,183,109,0.6); border-radius: 8px; overflow: hidden;">
        <div class="table-cell">
          <button type="submit" class="icon-search input-search" (click)="filterFormSubsidizedSuggest()">
            <i class="fa fa-search" aria-hidden="true"></i>
          </button>
        </div>
        <div class="table-cell">
          <input type="text" class="form-control input-search no-between-border" name="keyword"
            formControlName="keyword" placeholder="{{'home.search.placeHolder' | translate}}"
            appendTo="body">
        </div>
      </div>
    </form>
  </div>
</div>
<form id="formSave" [formGroup]="formRewardEmployee" class="mt-3">
  <div class="tbl-panel panel-body panel-table" style="padding: 12px;">
    <p-table [scrollable]="true" [value]="formRewardEmployee.controls"
      tableStyleClass="table controls-table table-wrapper b-t b-b" [paginator]="true" [(first)]="firstRowIndex"
      [rows]="pageSize" [totalRecords]="formRewardEmployee.controls.length"
      (onPage)="updateChooseAll(formRewardEmployee.controls)">
      <ng-template pTemplate="colgroup" let-columns>
        <colgroup>
          <col class="size-1">
          <col *ngIf="!isView" class="size-4">
          <col *ngIf="isViewFile" class="size-2">
          <col class="size-6">
          <col class="size-8">
          <col class="size-7">
          <col class="size-8">
          <col class="size-7">
          <col class="size-10">
          <col class="size-6">
          <col class="size-10">
          <col class="size-6">
          <col class="size-9">
          <col class="size-10">
          <col class="size-10">
        </colgroup>
      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th translate>common.table.index</th>
          <th translate *ngIf="!isView"><span>common.label.action</span></th>
          <!-- check all -->
          <th translate *ngIf="isViewFile">
            <span>common.button.chose</span>
            <div class="check">
              <input type="checkbox" (change)="chooseAll($event, formRewardEmployee.controls)" #elePreviewAll style="width: 18px; height: 1.5rem;">
            </div>
          </th>
          <!-- mã nhân viên -->
          <th translate><span [ngClass]="'required'">rewardPropose.empCode</span></th>
          <!-- tên nhân viên -->
          <th translate><span>EmployeeBO.fullName</span></th>
           <!-- Chức danh hiện tại-->
           <th translate><span>common.label.title</span></th>
          <!-- Đơn vị công tác -->
          <th translate><span>rewardGeneral.workunit</span></th>
           <!-- Quân hàm hiện tại -->
           <th translate><span>label.employee.rank</span></th>
          <!-- Loai danh hieu khen thuong -->
          <th translate><span>label.commendations.type</span></th>
          <!-- Khen thưởng có nằm trong tờ trình hay không -->
          <th translate><span>label.commendations.include.statement.type</span></th>
          <!-- danh hieu/hinh thuc -->
          <th translate><span [ngClass]="'required'">rewardGeneral.rewardTitle</span></th>
          <!-- tien thuong -->
          <th translate><span>rewardGeneral.money</span></th>
          <!-- noi dung khen thuong -->
          <th translate><span>rewardGeneral.content</span></th>
          <!-- Đơn vị tiếp nhận tiền thưởng-->
          <th translate><span>rewardGeneral.receiveBonusOrgName</span></th>
          <!-- Cá nhân nhận tiền --->
          <th pResizableColumn translate><span>label.rewardPropose.employee.partnerDrCode</span></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-item let-index="rowIndex">
        <tr [formGroup]="item" [ngClass]="{'d-none': item.controls.isHidden.value}">
          <td class="vt-align-center">
            {{index+1}}
          </td>
          <td *ngIf="!isView" class="vt-align-center">
            <button class="btn-icon minus" type="button" (click)="remove(index, item)"
              [innerHTML]="'common.icon.minus' | translate">
              <span class="glyphicons glyphicons-minus icon-table delete" title="Xóa"></span>
            </button>
          </td>
          <td class="vt-align-center" *ngIf="isViewFile">
            <input type="checkbox" class="ui-chkbox ui-chkbox-box" style="height: 1.5rem;" name="isPreview" [value]="0"
              formControlName="isPreview" (change)="onChangeChooseOrSuggest(item, formRewardEmployee.controls)" />
          </td>
          <td>
            <data-picker *ngIf="!isView" [property]="item.controls.employeeId" [property]="item.controls.employeeId" systemCode="political" operationKey="action.view"
              adResourceKey="resource.rewardPropose" objectBO="AllEmployeeBO" codeField="employeeCode" nameField="fullName"
              emailField="email" mobileNumberField="mobileNumber" selectField="employeeId" (onChange)="onSelectEmployee($event)" [isRequiredField]="true"
              [filterCondition]="employeeFilterCondition" [isSearchByPartyDomainData]="isSearchByPartyDomainData"
              [isNotSearchByOrgDomainData]="isNotSearchByOrgDomainData"
              [disabled]="isView" isDisplayCode="true">
            </data-picker>
              <input *ngIf="isView" type="text" class="form form-control" name="employeeCode" disabled="true" formControlName="employeeCode"
                [title]="item.controls.employeeCode.value  || ('')" />

            <app-control-messages [control]="item.controls.employeeId"></app-control-messages>
          </td>
          <td class="vt-align-left">
            <input type="text" class="form form-control" name="employeeName" disabled formControlName="employeeName" [title]="item.controls.employeeName.value  || ''">
            <app-control-messages [control]="item.controls.employeeName"></app-control-messages>
          </td>
          <!-- Chức danh hiện tại -->
          <td class="vt-align-left">
            <input type="text" class="form form-control" name="positionName" formControlName="positionName" [title]="item.controls.positionName.value  || ('')" [attr.disabled]="isView ? true: null">
            <app-control-messages [control]="item.controls.positionName"></app-control-messages>
          </td>
          <!-- Tên đơn vị công tác -->
          <td class="vt-align-left">
            <input type="text" class="form form-control" name="organizationName" formControlName="organizationName" [title]="item.controls.organizationName.value || ''" [attr.disabled]="isView ? true: null">
            <app-control-messages [control]="item.controls.organizationName"></app-control-messages>
          </td>
          <!-- Quân hàm hiện tại-->
          <td class="vt-align-left">
            <input type="text" class="form form-control" name="soldierLevel" disabled formControlName="soldierLevel" [title]="item.controls.soldierLevel.value  || ('')">
            <app-control-messages [control]="item.controls.soldierLevel"></app-control-messages>
          </td>
          <!-- Loại danh hiệu khen thưởng -->
          <td>
            <div class="text-center">
              <div class="form-check-inline">
                <label class="i-checks">
                  <input [attr.disabled]="isView ? true: null"
                         type="radio" class="form-check-input control-label" id="rewardCategory{{index}}_1" value="1"
                         (change)="isEnableReceiveBonusOrgCheck(item)"
                         formControlName="rewardCategory">
                  <i></i>
                  {{'rewardCategory.titleReward' | translate}}
                </label>
              </div>
              <div class="form-check-inline">
                <label class="i-checks">
                  <input [attr.disabled]="isView ? true: null"
                         type="radio" class="form-check-input control-label" id="rewardCategory{{index}}_2" value="2"
                         (change)="isEnableReceiveBonusOrgCheck(item)"
                         formControlName="rewardCategory">
                  <i></i>
                  {{'rewardCategory.formReward' | translate}}
                </label>
              </div>
            </div>
          </td>

           <!-- Loại khen thưởng có thanh toán hay không -->
           <td>
            <div class="text-left">
              <div class="form-check-inline">
                <label>
                  <input type="checkbox" class="ui-chkbox ui-chkbox-box" style="height: 1.5rem;"
                    name="includedStatement" [value]="Y" formControlName="includedStatement" />
                </label>
              </div>
            </div>
          </td>
          <!-- danh hieu/ hinh thuc khen thuong -->
          <td>
            <select-icon-filter [property]="item.controls.rewardTitleId" [options]="mapRewardTitleIdList[rewardType][item.controls.rewardCategory.value]" optionLabel="name"
              optionValue="rewardCategoryId" [placeHolder]="'common.label.cboMustSelect'" appendTo="body"
              [disabled]="isView"
              [rewardGroupType]="rewardTitleIdList"
              (onChange)="getAmountOfMoney(item)"
              [title]="item.controls.rewardTitleId.value ? item.controls.rewardTitleName.value : ''"
              >
            </select-icon-filter>
            <app-control-messages [control]="item.controls.rewardTitleId"></app-control-messages>
          </td>
          <!-- Số tiền khen thưởng -->
          <td class="vt-align-right">
            <input type="text" style="text-align:right;" class="form form-control" name="amountOfMoney" min="0" maxlength="15"
              formControlName="amountOfMoney" [attr.disabled]="isView ? true: null">
            <app-control-messages [control]="item.controls.amountOfMoney"></app-control-messages>
          </td>
          <!-- Nội dung khen thưởng -->
          <td class="vt-align-center">
            <textarea type="text" rows="2" name="description" class="form-control" [title]="item.controls.description.value || ''"
            formControlName="description" maxlength="2000" [attr.disabled]="isView ? true: null">
            </textarea>
            <app-control-messages [control]="item.controls.description"></app-control-messages>
          </td>

          <!-- Đơn vị tiếp nhận tiền thưởng-->
          <td class="vt-align-center">
            <org-selector [property]="item.controls.receiveBonusOrgId" operationKey="action.view"
                          adResourceKey="resource.rewardPropose" [defaultValue]="false" (onChange)="onProposeOrgChange($event)" [title]="item.value.orgName || ''"
                          [disabled]="isView || item.controls.isEnableReceiveBonusOrg? true: null" isRequiredField=true;>
            </org-selector>
            <app-control-messages [control]="item.controls.receiveBonusOrgId"></app-control-messages>
          </td>
          <td class="vt-align-left">
            <input type="text" class="form form-control" name="partnerDrCode" disabled formControlName="partnerDrCode" [title]="item.controls.partnerDrCode.value  || ''">
            <app-control-messages [control]="item.controls.partnerDrCode"></app-control-messages>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</form>
<button *ngIf="!isView" type="button" (click)="add()" [innerHTML]="'common.button.icon.addColumn' | translate">
</button>
