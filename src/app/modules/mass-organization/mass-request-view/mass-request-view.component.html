<div *ngIf="hasPermission('action.view')">
  <div id="savePage">
    <div class="panel panel-default">
      <form id="formInfoRequest" [formGroup]="formInfoRequest">
        <div class="panel-heading">
          <strong class="text-u-c">
            <i class="fa fa-th"></i>
            <span *ngIf="createPlan"> {{'resolutionQuarterYear.createCriteria' | translate}} </span>
            <span *ngIf="isView"> {{'resolutionQuarterYear.viewDetailCriteria' | translate}} </span>
            <span *ngIf="isInsertContentCriteria"> {{'resolutionQuarterYear.doCriteria' | translate}} </span>
          </strong>
        </div>
        <div class="panel-body padding-xl ui-g">
          <div class="ui-g-12 vt-row">
            <label *ngIf="branch === 1" class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right required">
              {{'label.mass.member.treeWomem' | translate}}
            </label>
            <label *ngIf="branch === 2" class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right required">
              {{'label.mass.member.treeYoung' | translate}}
            </label>
            <label *ngIf="branch === 3" class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right required">
              {{'label.mass.member.treeUnion' | translate}}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
              <mass-org-selector 
                [property]="f['massOrganizationId']" 
                operationKey="action.view"
                adResourceKey="resource.massRequestCriteria" 
                [defaultValue]="true" 
                [disabled]="true"
                [isRequiredField]="true" 
                [branch]="branch"
                >
              </mass-org-selector>
              <app-control-messages [control]="f['massOrganizationId']"></app-control-messages>
            </div>
            <label class="ui-g-12 ui-md-6 ui-lg-3 control-label vt-align-right required">
              {{'resolutionQuarterYear.finishDate' | translate}}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
              <date-picker [disabled]="true" [property]="f['finishDate']">
              </date-picker>
              <app-control-messages [control]="f['finishDate']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right required">
              {{'massRequest.massRequestCode' | translate}}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
              <input type="text" id="massRequestCode" [attr.disabled]="true" class="form form-control"
                [autoFocus]="true" name="massRequestCode" formControlName="massRequestCode" maxlength="50">
              <app-control-messages [control]="f['massRequestCode']"></app-control-messages>
            </div>
            <label class="ui-g-12 ui-md-6 ui-lg-3 control-label vt-align-right required">
              {{'massRequest.massRequestName' | translate}}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
              <input type="text" class="form form-control" [attr.disabled]="true" name="massRequestName"
                formControlName="massRequestName" maxlength="200">
              <app-control-messages [control]="f['massRequestName']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right required">
              {{'label.mass.categoryRequest.VofficeSign' | translate}}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
              <div class="form-check-inline">
                <label class="i-checks">
                  <input type="radio" [attr.disabled]="true" class="form-check-input control-label" id="signVoffice_1"
                    value="1" name="signVoffice" formControlName="signVoffice">
                  <i></i>
                  {{'massRequest.mustSign' | translate}}
                </label>
              </div>
              <div class="form-check-inline">
                <label class="i-checks">
                  <input type="radio" [attr.disabled]="true" class="form-check-input control-label" id="signVoffice_2"
                    value="2" name="signVoffice" formControlName="signVoffice">
                  <i></i>
                  {{'massRequest.mustNotSign' | translate}}
                </label>
              </div>
              <app-control-messages [control]="f['signVoffice']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right">
              {{'common.label.description' | translate}}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-9">
              <textarea type="text" name="description" [attr.disabled]="true" formControlName="description"
                class="form-control" rows="5" maxlength="1000"></textarea>
              <app-control-messages [control]="f['description']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 ">
            <div class="ui-g mt30">
              <div class="ui-g-12 ui-md-12 ui-lg-3">
                <div class="panel panel-default">
                  <div class="panel-heading vt-relative">
                    <strong class="text-u-c">
                      <i class="fa fa-th"></i>
                      <span translate>&nbsp;resolutionQuarterYear.criteriaTree</span>
                    </strong>
                    <div class="vt-absolute vt-shotcut-button-in-heading">
                      <button id="btnExport" *ngIf="hasPermission('action.export')" type="button" class="btn-icon plus" (click)="exportCriteriaReport()"
                        [title]="'common.header.export' | translate"><span
                          class="fa fa-download color-info"></span></button>
                      &nbsp;
                      <button id="btnSaveTree" *ngIf="isSaveTree" type="button" class="btn-icon plus"
                        [title]="'common.button.save' | translate" (click)="saveTree()"><span
                          class="fa fa-save color-info"></span></button>
                    </div>
                  </div>
                  <mass-criteria-tree #tree (onEditNode)="editMassCriteria($event)" [rootId]="massRequestId">
                  </mass-criteria-tree>
                </div>
              </div>
              <div class="ui-g-12 ui-md-12 ui-lg-9">
                <div class="listArea">
                  <div class="panel panel-default">
                    <div class="panel-heading vt-relative">
                      <strong class="text-u-c">
                        <i class="fa fa-th"></i>
                        {{'label.massCriteriaResponseList' | translate}}
                      </strong>
                    </div>
                    <div class="panel-body panel-table" *ngIf="isLeaf">
                      <p-table
                        #ptable
                        [value]="resultList.data"
                        [paginator]="true"
                        (onLazyLoad)="processSearch($event)"
                        [lazy]="true" [rows]="changeRow"
                        [totalRecords]="resultList.recordsTotal"
                        [scrollable]="true"
                        [lazyLoadOnInit]="false"
                        tableStyleClass="table table-wrapper table-hover table-striped b-t b-b">
                        <ng-template pTemplate="colgroup" let-columns>
                          <colgroup class="ng-star-inserted">
                            <col class="size-1">
                            <col class="size-1" *ngIf="hasPermission('action.view')">
                            <col class="size-12">
                            <col class="size-8">
                          </colgroup> 
                        </ng-template>
                        <ng-template pTemplate="header">
                          <tr>
                            <th translate>common.table.index</th>
                            <th  *ngIf="hasPermission('action.view')">{{'common.label.view.detail' | translate}}</th>
                            <th [pSortableColumn]="'massOrganizationName'">
                              {{'massOrganization.name' | translate}}
                              <p-sortIcon [field]="'massOrganizationName'"></p-sortIcon>
                            </th>
                            <th [pSortableColumn]="'status'">
                              {{'request.org-tree.manage.status' | translate}}
                              <p-sortIcon [field]="'status'"></p-sortIcon>
                            </th>
                          </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-item let-index="rowIndex+1">
                          <tr>
                            <td class="vt-align-center">{{index}}</td>
                            <td  class="vt-align-center" *ngIf="hasPermission('action.view')"  >
                              <a class="btn-table eye" (click)="prepareView(item)" title="{{'common.button.table.hEye' | translate}}"><i class="fa fa-eye color-info"></i></a>
                            </td>
                            <td class="vt-align-left">{{item.massOrganizationName}} </td>
                            <td class="vt-align-left">
                              <div class="success label-status" *ngIf="item.status == 0" ></div>
                              <div class="info label-status" *ngIf="item.status == 1" ></div>
                              <div class="info label-status" *ngIf="item.status == 2" ></div>
                              <div class="danger label-status" *ngIf="item.status == 3" ></div>
                              <div class="info label-status" *ngIf="item.status == 4" ></div>
                              {{'massCriteriaResponse.status.' + item.status | translate }}
                            </td>
                          </tr>
                        </ng-template>
                        <ng-template pTemplate="emptymessage">
                          <tr class="emptymessage">
                            <td [attr.colspan]="10" [innerHTML]="'app.noRecords' | translate">
                            </td>
                          </tr>
                        </ng-template>
                        <ng-template pTemplate="paginatorleft">
                          <table-footer (changeRow)="onTablePageChange($event)"  [resultList]="resultList"></table-footer>
                        </ng-template>
                      </p-table>
                    </div>
                    <div class="panel-footer vt-area-button">
                      <button type="button" (click)="goBack();" class="btn btn-sm btn-danger" [innerHTML]="'common.button.previous.icon' | translate" ></button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
<div *ngIf="!hasPermission('action.update')">
  {{'common.haveNoPermission' | translate}}
</div>