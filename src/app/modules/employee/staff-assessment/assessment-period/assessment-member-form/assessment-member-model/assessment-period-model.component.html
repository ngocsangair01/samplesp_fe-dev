<div class="content vt-nopadding">
    <div class="no-padding-left">
        <div class="panel-default">
            <div class="panel-heading vt-relative">
                <strong *ngIf="isAdd">
                    {{'assessment.model.title.addStaffAssessment' | translate}}
                </strong>
                <strong *ngIf="isEdit">
                    {{'assessmentPeriod.assessmentEmployeeList.addEmployee' | translate}}
                </strong>
                <div class="vt-absolute vt-shotcut-button-in-heading">
                    <button (click)="activeModal.close()" title="{{'common.button.close' | translate}}"
                      class="btn btn-span btn-sm"><img class="info-icon" src="./../../../../../../assets/images/home/Mask_Group_19561.png"></button>
                </div>
            </div>
            <form id="formData" [formGroup]="formData">
                <div *ngIf="!isMobileScreen" class="panel-body padding-xl ui-g">
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right">
                            {{'label.assessmentPeriod.name' | translate}}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-lg-3">
                            <select-filter
                                [property]="f['assessmentPeriodId']"
                                [options]="assessmentList"
                                optionLabel="assessmentPeriodName"
                                optionValue="assessmentPeriodId"
                                [placeHolder]="'placeholder.choose'"
                                [disabled]="true"
                            >
                            </select-filter>
                            <app-control-messages [control]="f['assessmentPeriodId']"></app-control-messages>
                        </div>
                        <label class="ui-g-12 ui-md-6 ui-lg-3 control-label vt-align-right">
                            {{'common.label.object' | translate}}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-lg-3">
                            <input [autoFocus]="true" disabled type="text" class="form form-control" name="assessmentPeriodName"
                                formControlName="assessmentPeriodName" maxlength="500">
                            <app-control-messages [control]="f['assessmentPeriodName']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right required">
                            {{'app.home.warning.officer' | translate}}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-lg-3">
                            <data-picker
                                #data
                                [property]="f['employeeId']"
                                systemCode="assessment"
                                operationKey="action.view"
                                adResourceKey="resource.assessmentPeriod"
                                objectBO="EmployeeBO"
                                codeField="employeeCode"
                                nameField="fullName"
                                emailField="email"
                                mobileNumberField="mobileNumber"
                                selectField="employeeId"
                                isDisplayCode="true"
                                [isPartyMember]="f['assessmentPeriodObjectId'].value == 2 ? 'true' : 'false'"
                                [disabled]="isEdit"
                                (onChange)="changeDataEmployee($event)">
                            </data-picker>
                            <app-control-messages [control]="f['employeeId']"></app-control-messages>
                        </div>
                    </div>

                </div>
                <div *ngIf="isMobileScreen" class="panel-body padding-xl ui-g">
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right">
                            {{'label.assessmentPeriod.name' | translate}}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                            <select-filter
                                [property]="f['assessmentPeriodId']"
                                [options]="assessmentList"
                                optionLabel="assessmentPeriodName"
                                optionValue="assessmentPeriodId"
                                [placeHolder]="'placeholder.choose'"
                                [disabled]="true"
                            >
                            </select-filter>
                            <app-control-messages [control]="f['assessmentPeriodId']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-3 control-label vt-align-right">
                            {{'common.label.object' | translate}}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                            <input [autoFocus]="true" disabled type="text" class="form form-control" name="assessmentPeriodName"
                                formControlName="assessmentPeriodName" maxlength="500">
                            <app-control-messages [control]="f['assessmentPeriodName']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right required">
                            {{'app.home.warning.officer' | translate}}
                        </label>
                        <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                            <data-picker
                                #data
                                [property]="f['employeeId']"
                                systemCode="assessment"
                                operationKey="action.view"
                                adResourceKey="resource.assessmentPeriod"
                                objectBO="EmployeeBO"
                                codeField="employeeCode"
                                nameField="fullName"
                                emailField="email"
                                mobileNumberField="mobileNumber"
                                selectField="employeeId"
                                isDisplayCode="true"
                                [isPartyMember]="f['assessmentPeriodObjectId'].value == 2 ? 'true' : 'false'"
                                [disabled]="isEdit"
                                (onChange)="changeDataEmployee($event)">
                            </data-picker>
                            <app-control-messages [control]="f['employeeId']"></app-control-messages>
                        </div>
                    </div>

                </div>
                <div class="panel-body panel-table" style="padding: 32px 12px 12px 12px;">
                    <p-table
                        #ptable
                        [value]="listAssessmentPeriodEmployee.controls"
                        [paginator]="true"
                        [rows]="30"
                        [scrollable]="true"
                        tableStyleClass="table table-wrapper table-hover table-striped b-t b-b"
                        [resizableColumns]="true"
                        styleClass="controlOverflow"
                    >
                    <ng-template pTemplate="colgroup" let-columns>
                        <colgroup class="ng-star-inserted">
                        <col style="width: 50px;">
                        <col style="width: 100px;">
                        <col style="width: 100px;">
                        <col style="width: 100px;">
                        <col style="width: 50px;">
                        </colgroup>
                    </ng-template>
                    <ng-template pTemplate="header">
                        <tr>
                            <th translate pResizableColumn>common.table.index</th>
                            <th pResizableColumn>{{'assessment.evaluating.level' | translate}}</th>
                            <th pResizableColumn>{{'label.assessmentPeriod.organization' | translate}}</th>
                            <th pResizableColumn>{{'evaluate.personnel.table.officersEvaluate' | translate}}</th>
                            <th pResizableColumn>{{'assessmentPeriod.assessmentLevelList.hasSign' | translate}}</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-item let-index="rowIndex+1">
                        <tr [formGroup]="item">
                        <td class="vt-align-center">{{index}}</td>
                        <td class="vt-align-left">
                            {{item.value.assessmentLevelName}}
                        </td>
                        <td class="vt-align-center">
                            <party-org-selector
                                *ngIf="item.value.assessmentOrder >= 3"
                                [property]="item.controls.assessmentPartyOrganizationId"
                                operationKey="action.view"
                                adResourceKey="resource.assessmentPeriod"
                                [disabled]="true"
                                [defaultValue]="false"
                                [isRequiredField]="false"
                            >
                            </party-org-selector>
                        </td>
                        <td class="vt-align-center">
                            <data-picker
                                [property]="item.controls.employeeId"
                                [disabled]="item.value.isDisabled"
                                systemCode="assessment"
                                operationKey="action.view"
                                adResourceKey="resource.assessmentPeriod"
                                objectBO="EmployeeBO"
                                codeField="employeeCode"
                                nameField="fullName"
                                emailField="email"
                                mobileNumberField="mobileNumber"
                                selectField="employeeId">
                            </data-picker>
                        </td>
                        <td class="vt-align-center">
                            <input [attr.disabled] = "item.value.assessmentOrder == 1 ? true : null" type="checkbox" class="ui-chkbox-box ui-widget ui-state-default" name="hasSign"
                            formControlName="hasSign">
                        </td>
                        </tr>
                    </ng-template>
                    </p-table>
                </div>
                <div class="panel-footer vt-area-button">
                    <button type="submit" (click)="save()" class="btn btn-sm vt-btn btn-submit"
                    [innerHTML]="'common.button.icon.save' | translate"></button>
                    <button type="button"  class="btn btn-sm vt-btn" (click)="cancel()"
                    [innerHTML]="'common.button.out' | translate"></button>
                </div>
            </form>
        </div>
    </div>
</div>