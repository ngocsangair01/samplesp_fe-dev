<div class="modal-body">
  <div class="panel panel-default">
    <div class="panel-heading">
      <strong class="text-u-c">
        <i class="fa fa-th"></i>
        <span> {{'assessment.setupCriteriaGroupMapping' | translate}}</span>
      </strong>
      <div class="vt-absolute vt-shotcut-button-in-heading">
        <span style="display: inline-block;" (click)="activeModal.close()" title="{{'common.button.close' | translate}}" class="btn btn-span btn-sm btn-info"><i class="fa fa-times"></i></span>
      </div>
    </div>
    <!-- data list -->
    <form id="formCriteriaGroup" [formGroup]="formCriteriaGroup">
      <div class="panel panel-default" *ngFor="let itemGroup of formCriteriaGroup.controls; index as idx" >
        <div [formGroup]="itemGroup">
          <!--header a item-->
          <div class="panel-heading" style="margin: 10px; margin-bottom: 0px;">
            <div class="ui-g-12 vt-row">
              <div class="ui-g-12 ui-md-7 ui-lg-7" style="height: 20px !important;">
                <strong class="text-u-c ">
                  <span >{{idx + 1}}. {{itemGroup.value.assessmentCriteriaGroupName | uppercase}} </span>
                </strong>
                <span class="box">
                  <input type="checkbox" id="{{idx + 'assessmentCriteriaGroupDisplay'}}" name="assessmentCriteriaGroupDisplay" [value]="1"
                    formControlName="assessmentCriteriaGroupDisplay" (change)="onchangeDisplayGroup(itemGroup.value, idx)"/>
                    <label for="{{idx + 'assessmentCriteriaGroupDisplay'}}"></label>
                </span>
              </div>
              <div class="ui-g-12 ui-md-5 ui-lg-5 vt-align-right" style="padding-right: 10px;">
                <button type="button" [title]="'titleAdd' | translate" *ngIf="idx !== 0" 
                  (click)="moveGroup(idx, true)" class="btn-icon plus" [innerHTML]="'common.icon.arrowUp' | translate"></button>
                <button type="button" [title]="'titleAdd' | translate" *ngIf="idx !== formCriteriaGroup.value.length - 1"
                  (click)="moveGroup(idx, false)" class="btn-icon plus" [innerHTML]="'common.icon.arrowDown' | translate"></button>
              </div>
            </div>
          </div>
          <!--body a item-->
          <div class="panel-body panel-table">
            <p-table 
              [scrollable]="true"
              [value]="itemGroup.value.assessmentCriteriaList"
              tableStyleClass="table controls-table table-wrapper b-t b-b" 
              styleClass="rewardGroupMinHeight"
              [(selection)]="itemGroup.value.listChangeDisplay"
            >
              <ng-template pTemplate="colgroup" let-columns>
                <colgroup class="ng-star-inserted">
                  <col class="size-1">
                  <col class="size-8">
                  <col class="size-1">
                  <col class="size-4">
                </colgroup>
              </ng-template>
              <ng-template pTemplate="header">
                <tr>
                  <th style="width: 2.25em" >
                    <p-tableHeaderCheckbox [disabled]="!itemGroup.value.assessmentCriteriaGroupDisplay || itemGroup.value.assessmentCriteriaGroupType === 2"
                      (click)="onChangeListChangeDisplay(idx)"></p-tableHeaderCheckbox>
                  </th>
                  <th >{{'assessmentPeriod.labelCriteria' | translate}}</th>
                  <th >{{'assessmentPeriod.assessmentLevelMappingCriteriaAgain' | translate}}</th>
                  <th>{{'assessmentPeriod.labelCriteriaOrderDisplay' | translate}}</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-item let-index="rowIndex+1">
                <tr>
                  <td class="vt-align-center" >
                    <p-tableCheckbox [value]="item"
                      [disabled]="!itemGroup.value.assessmentCriteriaGroupDisplay || itemGroup.value.assessmentCriteriaGroupType === 2"
                      (click)="onChangeListChangeDisplay(idx, item)"></p-tableCheckbox>
                  </td>
                  <td class="vt-align-left">{{item.assessmentCriteriaName}}</td>
                  <td class="vt-align-center">
                    <span class="box">
                      <input type="checkbox"
                        id="{{index + idx + item.assessmentCriteriaName +'assessmentLevelMappingCriteriaAgain'}}"
                        name="{{index + idx + item.assessmentCriteriaName + 'assessmentLevelMappingCriteriaAgain'}}"
                        [value]="1"
                        [checked]="item.assessmentLevelMappingCriteriaAgain"
                        [attr.disabled]="!itemGroup.value.assessmentCriteriaGroupDisplay || item.criteriaAgainDisabled === 1 ? true : null"
                        (change)="onClickAssessmentLevelMappingCriteriaAgain($event, itemGroup, item)"/>
                      <label for="{{index + idx + item.assessmentCriteriaName + 'assessmentLevelMappingCriteriaAgain'}}"></label>
                    </span>
                  </td>
                  <td class="vt-align-center">
                    <button type="button" [title]="'titleAdd' | translate" *ngIf="index !== 1"
                      (click)="moveItem(itemGroup, item, true)" class="btn-icon plus" [innerHTML]="'common.icon.arrowUp' | translate"
                      [disabled]="!itemGroup.value.assessmentCriteriaGroupDisplay"></button>
                    <button type="button" [title]="'titleAdd' | translate" *ngIf="index !== itemGroup.value.assessmentCriteriaList.length"
                      (click)="moveItem(itemGroup, item, false)" class="btn-icon plus" [innerHTML]="'common.icon.arrowDown' | translate"
                      [disabled]="!itemGroup.value.assessmentCriteriaGroupDisplay"></button>
                  </td>
                </tr>
              </ng-template>
            </p-table>
          </div>
        </div>
      </div>
    </form>
    <div class="panel-footer vt-area-button">
      <button type="submit" (click)="processSetup()" class="btn btn-sm btn-info" [innerHTML]="'common.button.icon.save' | translate"></button>
      <button type="button" (click)="activeModal.close()" class="btn btn-sm btn-danger"[innerHTML]="'common.button.out' | translate"></button>
    </div>
  </div>
</div>
<div class="bodyToast">
  <p-toast position="bottom-center"
  ></p-toast>
</div>