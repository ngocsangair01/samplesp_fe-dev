<div class="content vt-nopadding">
  <div class="no-padding-left">
    <div class="panel-default">
      <div class="panel-heading vt-relative">
        <strong>
          {{'assessmentMonitor.List' | translate}}
        </strong>
        <div class="vt-absolute vt-shotcut-button-in-heading">
          <button (click)="activeModal.close()" title="{{'common.button.close' | translate}}"
            class="btn btn-span btn-sm"><img class="info-icon" src="./../../../../../../assets/images/home/Mask_Group_19561.png"></button>
        </div>
      </div>
      <div class="panel-body panel-table">
        <p-table
        #ptable
        [value]="data"
        [paginator]="true"
        (onLazyLoad)="processSearchHis($event)"
        [lazy]="true"
        [rows]="changeRow"
        [totalRecords]="recordsTotal"
        [scrollable]="true" [lazyLoadOnInit]="false"
        tableStyleClass="table table-wrapper table-hover table-striped b-t b-b"
        [resizableColumns]="true"
        styleClass="controlOverflow">
          <ng-template pTemplate="colgroup" let-columns>
            <colgroup>
              <col style="width: 50px;">
              <col style="width: 100px;">
              <col style="width: 100px;">
              <col style="width: 100px;">
              <col style="width: 100px;">
              <col style="width: 100px;">
              <col style="width: 200px;">
              <col style="width: 100px;">
              <col style="width: 100px;">
            </colgroup>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th translate pResizableColumn>common.table.index</th>
              <th pResizableColumn>
                {{'assessmentMonitor.Popup.Officer' | translate}}
              </th>
              <th pResizableColumn>
                {{'assessmentMonitor.Popup.Title' | translate}}
              </th>
              <th pResizableColumn>
                {{'assessmentMonitor.Popup.unit' | translate}}
              </th>
              <th pResizableColumn>
                {{'assessmentMonitor.Popup.PartyTitle' | translate}}
              </th>
              <th pResizableColumn>
                {{'assessmentMonitor.Popup.PartyOrganization' | translate}}
              </th>
              <th pResizableColumn>
                {{'assessmentMonitor.Popup.Level' | translate}}
              </th>
              <th pResizableColumn>
                {{'assessmentMonitor.Popup.Deadline' | translate}}
              </th>
              <th pResizableColumn>{{'fundContribution.lable.action' | translate}}</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-item let-index="rowIndex+1">
            <tr>
              <td class="vt-align-center">{{parseInt(resultList.first) + index}}</td>
              <td class="vt-align-left text-break">
                <ul>
                  <li>{{item.employeeName}}</li>
                  <li>{{item.employeeCode}}</li>
                  <li>{{item.employeeEmail}}</li>
                </ul>
              </td>
              <td class="vt-align-left">{{item.employeePositionName}}</td>
              <td class="vt-align-left">{{item.organizationName}}</td>
              <td class="vt-align-left">{{item.employeePartyPosition}}</td>
              <td class="vt-align-left">{{item.employeePartyOrganization}}</td>
              <td class="vt-align-left text-break">
                <ul>
                  <li *ngFor="let data of item.levelNameEmployeeList; index as idx">
                    <span *ngIf="data.statusEvaluate === 'DONE'"
                      (click)="viewFileSign(item.signDocumentId)"
                      title="{{'assessment.evaluating.nextstaff' | translate}}"
                      style="font-weight: bold;color: #13C3DB;"
                    >
                      {{data.levelNameEmployeeMapping}}
                    </span>
                    <span *ngIf="data.statusEvaluate === 'PROCESSING'"
                      title="{{'assessment.evaluating.nextstaff' | translate}}"
                      style="font-weight: bold;color: #0B5178;"
                    >
                      {{data.levelNameEmployeeMapping}}
                    </span>
                    <span *ngIf="data.statusEvaluate === 'PENDING'">{{data.levelNameEmployeeMapping}}</span>
                  </li>
                </ul>
            </td>
              <td class="vt-align-center">{{item.assessmentDeadlineDate | displayDate}}</td>
              <td class="vt-align-center" style="overflow: initial!important;">
                <div ngbDropdown class="d-inline-block">
                    <button class="btn btn-sm btn-info" ngbDropdownToggle translate="">
                        common.label.action
                    </button>
                    <div ngbDropdownMenu>
                      <!-- Gửi nhắc nhở -->
                      <div>
                          <button class="dropdown-item" (click)="openSendReminder(item)"
                            [innerHTML]="'common.button.icon.SendReminder' | translate">
                          </button>
                        </div>
                    </div>
                </div>
            </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr class="emptymessage">
              <td [attr.colspan]="14" [innerHTML]="'app.noRecords' | translate">
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="paginatorleft">
            <table-footer (changeRow)="onTablePageChange($event)" [resultList]="resultList"></table-footer>
          </ng-template>
        </p-table>
      </div>
      <div class="panel-footer vt-area-button">
        <button type="button" (click)="activeModal.close()" class="btn btn-sm vt-btn" [innerHTML]="'common.button.out' | translate"></button>
      </div>
    </div>
  </div>
</div>
