<div class="card-form">
  <div class="clearfix">
    <div class="left-nav-bar pull-left row-header">
      <div>
        <img alt="back" class="img-fluid" src="./../../../../../../assets/images/home/Mask_Group_18824.png" (click)="goBack();">
        <span class="title" translate>subsidizedBeneficiary.label.subsidizedResult</span>
      </div>
    </div>
    <div class="right-nav-bar pull-right left-option">
        <ul class="header-right sys-ul space-line">
          <li>
            <button class="btn btn-sm vt-btn mt-btn ng-star-inserted" type="button" (click)="goBack();" [innerHTML]="'common.button.out' | translate">
            </button>
          </li>
          <li>
            <button class="btn btn-sm vt-btn btn-submit mt-btn ng-star-inserted" type="button" (click)="processSaveOrUpdate()" [innerHTML]="'common.button.icon.save' | translate">
            </button>
          </li>
        </ul>
    </div>
  </div>
</div>
<div class="info">
  <div *ngIf="hasPermission('action.view')">
    <div id="searchArea">
      <div class="panel panel-default card-info">
        <div class="panel-heading">
          <strong>
            <span class="ml-2 title-info">Thông tin kết quả trình ký đề xuất trợ cấp</span>
          </strong>
        </div>
        <form id="formSearch" [formGroup]="formSearch">
          <div class="panel-body padding-xl ui-g">
            <div class="ui-g-12 vt-row">
              <!--Năm -->
              <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right required">
                {{'subsidizedPeriod.label.decisionYear' | translate}}
              </label>
              <div class="ui-g-12 ui-md-3 ui-lg-3">
                <select-filter [property]="f['decisionYear']" [options]="listYear" optionLabel="year" optionValue="year"
                  [placeHolder]="'common.label.cboSelectAll'" (onChange)="onYearChange()">
                </select-filter>
                <app-control-messages [control]="f['decisionYear']"></app-control-messages>
              </div>
              <!-- tên đợt tro cap -->
              <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right required">
                {{'subsidizedPeriod.label.name' | translate}}
              </label>
              <div class="ui-g-12 ui-md-3 ui-lg-3">
                <select-filter [property]="f['subsidizedPeriodId']" [options]="periodList" optionLabel="name"
                  optionValue="subsidizedPeriodId" [placeHolder]="'common.label.cboMustSelect'"
                  (onChange)="onPeriodChange()">
                </select-filter>
                <app-control-messages [control]="f['subsidizedPeriodId']"></app-control-messages>
              </div>
            </div>
            <div class="ui-g-12 vt-row">
              <!-- số quyết định -->
              <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right required">
                {{'subsidizedRusult.label.decisionNumber' | translate}}
              </label>
              <div class="ui-g-12 ui-md-3 ui-lg-3">
                <input type="text" class="form form-control" formControlName="decisionNumber" maxlength="200">
                <app-control-messages [control]="f['decisionNumber']"></app-control-messages>
              </div>
              <!-- ngày quyết định -->
              <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right required">
                {{'subsidizedRusult.label.decisionDate' | translate}}
              </label>
              <div class="ui-g-12 ui-md-3 ui-lg-3">
                <date-picker [property]="f['decisionDate']">
                </date-picker>
                <app-control-messages [control]="f['decisionDate']"></app-control-messages>
              </div>
            </div>
          </div>
          <div class="listArea" style="padding: 10px;">
            <div class="panel-body panel-table">
              <p-table #ptable [value]="resultList.data" [paginator]="true" (onLazyLoad)="processSearch($event)"
                [rows]="changeRow" [totalRecords]="resultList.recordsTotal" [scrollable]="true" [lazyLoadOnInit]="false"
                tableStyleClass="table table-wrapper table-hover table-striped b-t b-b" styleClass="controlOverflow" [resizableColumns]="true">
                <ng-template pTemplate="colgroup" let-columns>
                  <colgroup>
                    <col style="width: 50px;">
                    <col style="width: 100px;">
                    <col style="width: 100px;">
                    <col style="width: 100px;">
                    <col style="width: 100px;">
                    <col style="width: 100px;">
                    <col style="width: 100px;">
                    <col style="width: 100px;">
                    <col style="width: 100px;">
                    <col style="width: 100px;">
                    <col style="width: 100px;">
                    <col style="width: 100px;">
                  </colgroup>
                </ng-template>
                <ng-template pTemplate="header">
                  <tr>
                    <th translate pResizableColumn>common.table.index</th>
                    <!-- mã nhân viên -->
                    <th translate pResizableColumn><span>subsidizedSuggest.label.employeeCode</span></th>
                    <!-- tên nhân viên -->
                    <th translate pResizableColumn><span>subsidizedSuggest.label.employeeName</span></th>
                    <!-- loại hỗ trợ -->
                    <th translate pResizableColumn><span>subsidizedPeriod.label.subsidizedType</span></th>
                    <!-- năm -->
                    <th translate pResizableColumn><span>subsidizedSuggest.label.year</span></th>
                    <!-- Mối quan hệ -->
                    <th translate pResizableColumn><span>subsidizedSuggest.label.relationship</span></th>
                    <!-- Họ và tên thân nhân -->
                    <th translate pResizableColumn><span>subsidizedSuggest.label.relativeName</span>
                      <!-- Địa chỉ thân nhân -->
                    <th translate pResizableColumn><span>subsidizedResult.label.currentResidence</span>
                      <!-- lý do -->
                    <th translate pResizableColumn><span>subsidizedSuggest.label.note</span></th>
                    <!-- số tiền -->
                    <th translate pResizableColumn><span>subsidizedBeneficiary.label.money</span>
                      <!-- đơn vị đề xuất -->
                    <th translate pResizableColumn><span>subsidizedSuggest.label.proposeOrgId</span></th>
                    <!-- ngày cấp -->
                    <th translate pResizableColumn><span>subsidizedBeneficiary.label.date</span>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-item let-index="rowIndex">
                  <tr>
                    <td class="vt-align-center">{{index+1}}</td>
                    <td class="vt-align-left">{{item.employeeCode}}</td>
                    <td class="vt-align-left">{{item.employeeName}}</td>
                    <td class="vt-align-left">{{item.subsidizedTypeName}}</td>
                    <td class="vt-align-center">{{item.decisionYear}}</td>
                    <td class="vt-align-left">{{item.relationTypeName}}</td>
                    <td class="vt-align-left">{{item.employeeId != item.objectId ? item.relativeName:null}}</td>
                    <td class="vt-align-left">{{item.currentResidence}}</td>
                    <td class="vt-align-left">{{item.reason}}</td>
                    <td class="vt-align-right">{{item.subsidizedMoney | number}}</td>
                    <td class="vt-align-left">{{item.proposeOrgName}}</td>
                    <td class="vt-align-left">{{item.approvedDate | displayDate}}</td>
                  </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                  <tr class="emptymessage">
                    <td [attr.colspan]="11" [innerHTML]="'app.noRecords' | translate">
                    </td>
                  </tr>
                </ng-template>
                <ng-template pTemplate="paginatorleft">
                  <table-footer (changeRow)="onTablePageChange($event)"  [resultList]="resultList"></table-footer>
                </ng-template>
              </p-table>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>