<div id="searchPage">
  <div id="searchArea">
    <div class="panel panel-default">
      <div class="panel-heading" translate>
        <strong class="text-u-c">
          <i class="fa fa-th"></i>
          common.label.search.info
        </strong>
      </div>
      <form id="formSearch" [formGroup]="formSearch">
        <div class="panel-body padding-xl ui-g">
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right">
              {{'organization.label.name' | translate}}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
              <party-org-selector
                [property]="f['partyOrganizationId']"
                operationKey="action.view"
                adResourceKey="resource.partyMember"
                selectField="partyOrganizationName"
                [defaultValue]="true">
              </party-org-selector>
              <app-control-messages [control]="f['partyOrganizationId']"></app-control-messages>
            </div>
            <label class="ui-g-12 ui-md-6 ui-lg-3 control-label vt-align-right">
              {{ 'label.exe.req.employee' | translate }}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
              <data-picker
                [property]="f['employeeId']"
                systemCode="political"
                operationKey="action.view"
                adResourceKey="resource.partyMember"
                objectBO="EmployeeBO"
                codeField="employeeCode"
                nameField="fullName"
                emailField="email"
                selectField="employeeId"
                isNotSearchByOrgDomainData="true">
              </data-picker>
              <app-control-messages [control]="f['employeeId']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right">
              {{'app.partyMember.partyMemberType' | translate}}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
              <div class="form-check-inline">
                <label class="i-checks">
                  <input type="radio" class="form-check-input control-label" id="partyMemberType_0" [value]="null" name="partyMemberType" formControlName="partyMemberType">
                  <i></i>
                  {{ 'app.organization.status.all' | translate }}
                </label>
              </div>
              <div class="form-check-inline">
                <label class="i-checks">
                  <input type="radio" class="form-check-input control-label" id="partyMemberType_1" [value]="1" name="partyMemberType" formControlName="partyMemberType">
                  <i></i>
                  {{ 'partyMemberType.preliminary' | translate }}
                </label>
              </div>
              <div class="form-check-inline">
                <label class="i-checks">
                  <input type="radio" class="form-check-input control-label" id="partyMemberType_2" [value]="2" name="partyMemberType" formControlName="partyMemberType">
                  <i></i>
                  {{ 'partyMemberType.official' | translate }}
                </label>
              </div>
              <div class="form-check-inline">
                <label class="i-checks">
                  <input type="radio" class="form-check-input control-label" id="partyMemberType_4" [value]="4" name="partyMemberType" formControlName="partyMemberType">
                  <i></i>
                  {{ 'homeWarning.newPartyMember' | translate }}
                </label>
              </div>
              <div class="form-check-inline">
                <label class="i-checks">
                  <input type="radio" class="form-check-input control-label" id="partyMemberType_3" [value]="3" name="partyMemberType" formControlName="partyMemberType">
                  <i></i>
                  {{ 'partyMemberType.outOfReserveTime' | translate }}
                </label>
              </div>
              <app-control-messages [control]="f['partyMemberType']"></app-control-messages>
            </div>
            <label class="ui-g-12 ui-md-6 ui-lg-3 control-label vt-align-right">
              {{'label.document.face' | translate}}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
              <select-filter
                [property]="f['empTypeId']"
                [options]="empTypeList"
                optionLabel="name"
                optionValue="empTypeId"
                [placeHolder]="'common.label.cboSelectAll'">
              </select-filter>
              <app-control-messages [control]="f['empTypeId']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right">
              {{ 'partyMember.admissionFromDate' | translate }}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
              <date-picker 
                [property]="f['partyAdmissionFromDate']">
              </date-picker>
              <app-control-messages [control]="f['partyAdmissionFromDate']"></app-control-messages>
            </div>
            <label class="ui-g-12 ui-md-6 ui-lg-3 control-label vt-align-right">
              {{ 'partyMember.admissionToDate' | translate }}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
              <date-picker 
                [property]="f['partyAdmissionToDate']">
              </date-picker>
              <app-control-messages [control]="f['partyAdmissionToDate']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right">
              {{ 'partyMember.officialPartyDayFrom' | translate }}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
              <date-picker
                [property]="f['partyOfficialAdmissionFromDate']">
              </date-picker>
              <app-control-messages [control]="f['partyOfficialAdmissionFromDate']"></app-control-messages>
            </div>
            <label class="ui-g-12 ui-md-6 ui-lg-3 control-label vt-align-right">
              {{ 'partyMember.officialPartyDayTo' | translate }}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
              <date-picker
                [property]="f['partyOfficialAdmissionToDate']">
              </date-picker>
              <app-control-messages [control]="f['partyOfficialAdmissionToDate']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right">
              {{ 'partyMember.partyTitleHighest' | translate }}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
              <data-picker
              [property]="f['partyPositionId']"
              systemCode="political"
              operationKey="action.view"
              adResourceKey="resource.partyMember"
              objectBO="PartyPositionBO"
              codeField="code"
              nameField="name"
              selectField="partyPositionId"
              filterCondition=" AND obj.IS_ACTIVE = 1
                              ORDER BY obj.sort_order ASC">
              </data-picker>
              <app-control-messages [control]="f['partyPositionId']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right">
              {{ 'partyMember.status' | translate }}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
              <div class="form-check-inline ">
                <label class="i-checks">
                  <input type="radio" class="form-check-input control-label" id="0" [value]="null" name="status" formControlName="status" (click)="changeDisable($event)">
                  <i></i>
                  {{ 'app.organization.status.all' | translate }}
                </label>
              </div>
              <div class="form-check-inline">
                <label class="i-checks">
                  <input type="radio" class="form-check-input control-label" id="1" [value]="1" name="status" formControlName="status" (click)="changeDisable($event)">
                  <i></i>
                  {{ 'label.partyMember.isWorking' | translate }}
                </label>
              </div>
              <div class="form-check-inline">
                <label class="i-checks">
                  <input type="radio" class="form-check-input control-label" id="2" [value]="2" name="status"  formControlName="status" (click)="changeDisable($event)">
                  <i></i>
                  {{ 'partymember.isWorking.stop' | translate }}
                </label>
              </div>
              <div class="form-check-inline">
                <label class="i-checks">
                  <input type="radio" class="form-check-input control-label" id="3" [value]="3" name="status"  formControlName="status" (click)="changeDisable($event)">
                  <i></i>
                  {{ 'homeWarning.longLeaveRetirement' | translate }}
                </label>
              </div>
              <app-control-messages [control]="f['status']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right">
              {{ 'partyMember.statusEffectiveFromDate' | translate }}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
              <date-picker
                [property]="f['effectiveStartFromDate']"
                [disabled]="isDisableEffective">
              </date-picker>
              <app-control-messages [control]="f['effectiveStartFromDate']"></app-control-messages>
            </div>
            <label class="ui-g-12 ui-md-6 ui-lg-3 control-label vt-align-right">
              {{ 'partyMember.statusEffectiveToDate' | translate }}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
              <date-picker
                [property]="f['effectiveStartToDate']"
                [disabled]="isDisableEffective">
              </date-picker>
              <app-control-messages [control]="f['effectiveStartToDate']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right">
              {{ 'partyMember.retirementFromDate' | translate }}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
              <date-picker
                [property]="f['retirementFromDate']"
                [disabled]="isDisableRetirement">
              </date-picker>
              <app-control-messages [control]="f['retirementFromDate']"></app-control-messages>
            </div>
            <label class="ui-g-12 ui-md-6 ui-lg-3 control-label vt-align-right">
              {{ 'partyMember.retirementToDate' | translate }}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
              <date-picker
                [property]="f['retirementToDate']"
                [disabled]="isDisableRetirement">
              </date-picker>
              <app-control-messages [control]="f['retirementToDate']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right">
              {{ 'partyMember.exclusionAndRemoveName' | translate }}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3 nowrap">
              <div class="form-check-inline">
                <label class="i-checks">
                  <input type="radio" class="form-check-input control-label" [value]="1" name="exclusionStatus"
                    formControlName="exclusionStatus" (click)="changeHide()" [attr.disabled]="isDisableDecision">
                  <i></i>
                  {{ 'partyMember.exclusion.party' | translate }}
                </label>
              </div>
              <div class="form-check-inline">
                <label class="i-checks">
                  <input type="radio" class="form-check-input control-label" [value]="2" name="exclusionStatus"
                    formControlName="exclusionStatus" (click)="changeHide()" [attr.disabled]="isDisableDecision" checked="true">
                  <i></i>
                  {{ 'partyMember.removeName.party' | translate }}
                </label>
              </div>
              <app-control-messages [control]="f['exclusionStatus']"></app-control-messages>
            </div>
            <label class="ui-g-12 ui-md-6 ui-lg-3 control-label vt-align-right">
              {{ 'label.commendations.number' | translate }}
            </label>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
              <input type="text" class="form form-control" name="documentNumber" formControlName="documentNumber" maxlength="200" [attr.disabled]="isDisableDocumentNumber">
              <app-control-messages [control]="f['documentNumber']"></app-control-messages>
            </div>
          </div>
        </div>
      <div class="panel-footer vt-area-button">
        <button type="submit" class="btn btn-sm btn-info" (click)="processSearch()" [innerHTML]="'common.button.icon.search' | translate" ></button>
        <button type="button" class="btn btn-sm btn-info" *ngIf="hasPermission('action.insert')" (click)="add()" [innerHTML]="'common.button.icon.addNew' | translate" ></button>
        <button type="button" class="btn btn-sm btn-info" *ngIf="hasPermission('action.export')" (click)="processExport()" [innerHTML]="'common.button.icon.exportFile' | translate" ></button>
        <button type="button" class="btn btn-sm btn-info" *ngIf="hasPermission('action.import')" (click)="import()"[innerHTML]="'party.member.import' | translate" ></button>
      </div>
    </form>
    </div>
  </div>
</div>
<div id="listArea">
    <div class="panel panel-default">
      <div class="panel-heading vt-relative">
        <strong class="text-u-c">
          <i class="fa fa-th"></i>
          {{'partyMembers.listMembers' | translate}}
        </strong>
      </div>
      <div class="panel-body panel-table">
        <p-table
          #ptable
          [value]="resultList.data"
          [paginator]="true"
          (onLazyLoad)="processSearch($event)"
          [lazy]="true" [rows]="changeRow"
          [totalRecords]="resultList.recordsTotal"
          [scrollable]="true"
          [lazyLoadOnInit]="false"
          tableStyleClass="table table-wrapper table-hover table-striped b-t b-b"
        >
          <ng-template pTemplate="colgroup" let-columns>
            <colgroup>
              <col class="size-1">
              <col class="size-1" *ngIf="hasPermission('action.view')">
              <col class="size-1" *ngIf="hasPermission('action.update','resource.employeeManager')">
              <col class="size-1">
              <col class="size-1">
              <col class="size-3">
              <col class="size-3">
              <col class="size-2">
              <col class="size-5">
              <col class="size-2">
              <col class="size-3">
              <col class="size-3">
              <col class="size-3">
              <col class="size-3">
              <col class="size-3">
              <col class="size-3">
              <col class="size-3">
              <col class="size-2">
              <col class="size-2">
            </colgroup>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th translate>common.table.index</th>
              <th *ngIf="hasPermission('action.view')" translate>common.label.view</th>
              <th *ngIf="hasPermission('action.update','resource.employeeManager')" translate>common.label.edit</th>
              <th translate>partyMember.exclusion</th>
              <th translate>partyMember.removeName</th>
              <th [pSortableColumn]="'partyOrganizationName'">
                {{'organization.label.name' | translate}}
                <p-sortIcon [field]="'partyOrganizationName'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'fullName'">
                {{'PartyMemberBO.memberName' | translate}}
                <p-sortIcon [field]="'fullName'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'employeeCode'">
                {{'PartyMemberBO.memberCode' | translate}}
                <p-sortIcon [field]="'employeeCode'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'email'">
                {{'label.mass.organizations.email' | translate}}
                <p-sortIcon [field]="'email'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'empTypeCode'">
                {{'partyMember.face.rank' | translate}}
                <p-sortIcon [field]="'empTypeCode'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'partyMemberType'">
                {{'app.partyMember.partyMemberType' | translate}}
                <p-sortIcon [field]="'partyMemberType'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'partyAdmissionDate'">
                {{'partymanager.label.partyAdmisionDate' | translate}}
                <p-sortIcon [field]="'partyAdmissionDate'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'partyOfficialAdmissionDate'">
                {{'personalPunishment.partyOfficialDate' | translate}}
                <p-sortIcon [field]="'partyOfficialAdmissionDate'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'partyTitleHighest'">
                {{'partyMember.partyTitleHighest' | translate}}
                <p-sortIcon [field]="'partyTitleHighest'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'statusName'">
                {{'partyMember.status' | translate}}
                <p-sortIcon [field]="'statusName'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'effectiveStartDate'">
                {{'partyMember.effectiveStartDate' | translate}}
                <p-sortIcon [field]="'effectiveStartDate'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'retirementDate'">
                {{'partyMember.retirementDate' | translate}}
                <p-sortIcon [field]="'retirementDate'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'deductionNumber'">
                {{'partyMember.documentNumber.exclusion' | translate}}
                <p-sortIcon [field]="'deductionNumber'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'deleteNameNumber'">
                {{'partyMember.documentNumber.removeName' | translate}}
                <p-sortIcon [field]="'deleteNameNumber'"></p-sortIcon>
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-item let-index="rowIndex+1">
            <tr>
              <td class="vt-align-center">{{index}}</td>
              <td class="vt-align-center" *ngIf="hasPermission('action.view')">
                <a  class="btn-table edit" (click)=processView(item) title="{{'common.label.view' | translate}}" ><i class="fas fa-eye"></i></a>
              </td>
              <td class="vt-align-center" *ngIf="hasPermission('action.update','resource.employeeManager')">
                <a  class="btn-table edit" (click)="edit(item)" title="{{'common.label.edit' | translate}}" ><i class="fa fa-edit"></i></a>
              </td>
              <td class="vt-align-center">
                <a class="btn-table edit" *ngIf="!item.deductionNumber" (click)="exclusion(item)" title="Khai trừ"><i class="fa fa-times"></i></a>
              </td>
              <td class="vt-align-center">
                <a class="btn-table edit" *ngIf="!item.deleteNameNumber" (click)="removeName(item)" title="Xóa tên"><i class="fa fa-eraser"></i></a>
              </td>
              <td class="vt-align-left">{{item.partyOrganizationName}}</td>
              <td class="vt-align-left">{{item.fullName}}</td>
              <td class="vt-align-right">{{item.employeeCode}}</td>
              <td class="vt-align-left">{{item.email}}</td>
              <td class="vt-align-left">{{item.empTypeCode}}</td>
              <td class="vt-align-left">{{item.partyMemberType}}</td>
              <td class="vt-align-center">{{item.partyAdmissionDate | displayDate}}</td>
              <td class="vt-align-center">{{item.partyOfficialAdmissionDate | displayDate}}</td>
              <td class="vt-align-left">{{item.partyTitleHighest}}</td>
              <td class="vt-align-left">{{item.statusName}}</td>
              <td class="vt-align-center">{{item.effectiveStartDate | displayDate}}</td>
              <td class="vt-align-center">{{item.retirementDate | displayDate}}</td>
              <td class="vt-align-left">{{item.deductionNumber}}</td>
              <td class="vt-align-left">{{item.deleteNameNumber}}</td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr class="emptymessage">
              <td [attr.colspan]="10" [innerHTML]="'app.noRecords' | translate">
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="paginatorleft">
            <table-footer (changeRow)="onTablePageChange($event)" [resultList]="resultList"></table-footer>
          </ng-template>
        </p-table>
      </div>
    </div>
</div>
