<div *ngIf="hasPermission('action.view')">
  <div id="searchPage" class="'display-search-not-vertical">
    <div id="searchArea" class="panel panel-default">
      <form id="formSearch" [formGroup]="formSearch">
        <button type="submit" *ngIf="hasPermission('action.view')" class="btn btn-sm vt-btn btn-submit"
          (click)="processSearch()" style="display: none"
          [innerHTML]="'common.button.icon.search' | translate"></button>
        <div style="overflow: unset" class="panel-heading">
          <a *ngIf="!isShowVertical" style="color: #202123; font-weight: 600; font-size: 16px; height: 40px"
            (click)="pressLabelSearchBasic()">
            <div *ngIf="isBasicSearch && !isShowVertical" style="height: 100%; padding: 9px 20px 9px 15px;">
              <i class="fa fa-caret-down"></i>
              {{'common.label.hideBasicSearch' | translate}}
            </div>
            <div *ngIf="!isBasicSearch && !isShowVertical" style="height: 100%; padding: 9px 20px 9px 15px;">
              <i class="fa fa-caret-right"></i>
              {{'common.label.showBasicSearch' | translate}}
            </div>
          </a>
          <span *ngIf="isShowVertical"
            style="color: #202123; font-weight: 600; font-size: 16px; height: 40px; padding-left: 10px; padding-top: 10px;">
            <img alt="back" class="img-fluid icon-show-hide-search"
              src="./../../../../../../assets/images/home/Mask_Group_24370.png" (click)="closeBasicSearch()">
            {{'common.label.showBasicSearch' | translate}}
          </span>
        </div>
        <div *ngIf="isBasicSearch" class="vt-border-side-bottom">
          <div class="panel-body padding-xl">
            <a *ngIf="isShowVertical" style="color: #202123; font-weight: 600; font-size: 14px; height: 40px"
              (click)="pressLabelSearchBasicDiv()">
              <div *ngIf="isBasicDivSearch && isShowVertical" style="padding: 9px 20px 9px 15px;">
                <i class="fa fa-caret-down"></i>
                {{'common.label.basicSearch' | translate}}
              </div>
              <div *ngIf="!isBasicDivSearch && isShowVertical" style="padding: 9px 20px 9px 15px;">
                <i class="fa fa-caret-right"></i>
                {{'common.label.basicSearch' | translate}}
              </div>
            </a>
            <div class="ui-g vt-row">
              <div class="ui-md-6 rows">
                <label class="ui-g-12 ui-md-6 ui-lg-4 control-label vt-align-right">
                  <p-checkbox *ngIf="isShowVertical" [formControl]="f['isPartyOrganizationId']" binary="true">
                  </p-checkbox>
                  {{'admissionSympathyManagement.filter.employeeName' | translate}}
                </label>
                <div class="ui-g-12 ui-md-6 ui-lg-6">
                  <data-picker
                          [property]="f['employeeId']"
                          systemCode="political"
                          operationKey="action.view"
                          adResourceKey="CTCT_COMPETITION_PROGRAM"
                          objectBO="EmployeeBO"
                          codeField="employeeCode"
                          nameField="fullName"
                          emailField="email"
                          mobileNumberField="mobileNumber"
                          selectField="employeeId"
                          type="employee"
                          isPartyMember="'true'"
                  >
                  </data-picker>
                  <app-control-messages
                          [control]="f['employeeId']"></app-control-messages>
                </div>
              </div>
              <div class="ui-md-6 rows">
                <label class="ui-g-12 ui-md-6 ui-lg-4 control-label vt-align-right">
                  <p-checkbox *ngIf="isShowVertical" [formControl]="f['isPartyOrganizationId']" binary="true">
                  </p-checkbox>
                  {{'common.label.unit' | translate}}
                </label>
                <div class="ui-g-12 ui-md-6 ui-lg-6">
                  <org-selector [property]="f['organizationId']" operationKey="action.view"
                    adResourceKey="resource.partyOrganization" [defaultValue]="true">
                  </org-selector>
                  <app-control-messages [control]="f['organizationId']"></app-control-messages>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div *ngIf="isBasicSearch" class="panel-footer vt-area-button">
          <button type="submit" *ngIf="hasPermission('action.view')" class="btn btn-sm vt-btn btn-submit"
            (click)="processSearch()" [innerHTML]="'common.button.icon.search' | translate"></button>
          <button *ngIf="isShowVertical" type="submit" class="btn btn-sm vt-btn " (click)="showFormSearch(false)"
            [innerHTML]="'common.button.icon.out' | translate"></button>
        </div>
      </form>
    </div>
  </div>
  <div id="listArea">
    <div class="panel panel-default">
      <div class="panel-heading vt-relative vt-panel-heading-table">
        <div *ngIf="isBasicSearch && isMenuHeaderMobile" class="show-btn-right-header">
          <div class="d-inline-block mt-2">
            <button (click)="showFormMobileSearch(true)" class="btn btn-sm vt-btn">
              <img src="assets/img/icon/lọc.svg">
            </button>
          </div>
        </div>
        <strong *ngIf="!isMenuHeaderMobile">
          <img *ngIf="isShowVertical && !isShowHideVertical" alt="next" class="img-fluid icon-show-hide-search"
            src="./../../../../../../assets/images/home/Mask_Group_24371.png" (click)="closeBasicSearch()">
          {{'admissionManagement.listAdmission' | translate}}
        </strong>
        <div class="show-btn-right-header">
          <button type="button" class="btn btn-sm vt-btn btn-submit" 
            (click)="openFormImport()" [innerHTML]="'common.button.import' | translate"></button>
        </div>
      </div>
      <div class="" *ngIf="isMenuHeaderMobile" style="padding: 10px; font-size: 14px">
        <strong>
          <img *ngIf="isShowVertical && !isShowHideVertical" alt="next" class="img-fluid icon-show-hide-search"
            src="./../../../../../../assets/images/home/Mask_Group_24371.png" (click)="closeBasicSearch()">
          {{'admissionManagement.listAdmission' | translate}}
        </strong>
      </div>
      <div class="panel-body panel-table table-container">
        <p-table #ptable [value]="resultList.data" [paginator]="true" (onLazyLoad)="processSearch($event)" [lazy]="true"
          [rows]="changeRow" [totalRecords]="resultList.recordsTotal" [scrollable]="true" [lazyLoadOnInit]="false"
          class="custom-table" tableStyleClass="table table-wrapper table-hover table-striped b-t b-b"
          [resizableColumns]="true" styleClass="controlOverflow">
          <ng-template pTemplate="colgroup" let-columns>
            <colgroup>
              <col style="width: 50px;">
              <col style="width: 100px;">
              <col style="width: 190px;">
              <col style="width: 100px;">
              <col style="width: 220px;">
              <col style="width: 300px;">
              <col style="width: 150px;">
              <col style="width: 160px;">
              <col style="width: 130px;">
              <col style="width: 100px;">
            </colgroup>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th translate pResizableColumn>common.table.index</th>
              <th [pSortableColumn]="'employeeCode'" pResizableColumn>
                {{'admissionSympathyManagement.label.employeeCode' | translate}}
                <p-sortIcon [field]="'employeeCode'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'fullName'" pResizableColumn>
                {{'admissionSympathyManagement.label.employeeName' | translate}}
                <p-sortIcon [field]="'fullName'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'dateOfBirth'" pResizableColumn>
                {{'admissionSympathyManagement.label.dateOfBirth' | translate}}
                <p-sortIcon [field]="'dateOfBirth'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'positionName'" pResizableColumn>
                {{'admissionSympathyManagement.label.positionName' | translate}}
                <p-sortIcon [field]="'positionName'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'organizationName'" pResizableColumn>
                {{'admissionSympathyManagement.label.organizationName' | translate}}
                <p-sortIcon [field]="'organizationName'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'examDate'" pResizableColumn>
                {{'admissionSympathyManagement.label.examDate' | translate}}
                <p-sortIcon [field]="'examDate'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'certificateExpiryDate'" pResizableColumn>
                {{'admissionSympathyManagement.label.certificateExpiryDate' | translate}}
                <p-sortIcon [field]="'certificateExpiryDate'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'status'" pResizableColumn>
                {{'admissionSympathyManagement.label.status' | translate}}
                <p-sortIcon [field]="'status'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'score'" pResizableColumn>
                {{'admissionSympathyManagement.label.score' | translate}}
                <p-sortIcon [field]="'score'"></p-sortIcon>
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-item let-index="rowIndex+1">
            <tr>
              <td class="vt-align-center none-border-left">{{index}}</td>
              <td>{{item.employeeCode}}</td>
              <td>{{item.fullName}}</td>
              <td>{{item.dateOfBirth | displayDate }}</td>
              <td>{{item.positionName}}</td>
              <td>{{item.organizationName}}</td>
              <td>{{item.examDate | displayDate }}</td>
              <td>{{item.certificateExpiryDate | displayDate }}</td>
              <td>
                <div class="label-status inprogress" *ngIf="item.status==1">{{'admissionSympathyManagement.value.status.passed' |
                  translate}}</div>
                <div class="label-status cancel" *ngIf="item.status==2">{{'admissionSympathyManagement.value.status.notPassed' |
                  translate}}</div>
              </td>
              <td>{{item.score}}</td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr class="emptymessage">
              <td [attr.colspan]="9" [innerHTML]="'app.noRecords' | translate">
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="paginatorleft">
            <table-footer [resultList]="resultList"></table-footer>
          </ng-template>
        </p-table>
      </div>
    </div>
  </div>
</div>
<div *ngIf="!hasPermission('action.view')">
  {{'common.haveNoPermission' | translate}}
</div>