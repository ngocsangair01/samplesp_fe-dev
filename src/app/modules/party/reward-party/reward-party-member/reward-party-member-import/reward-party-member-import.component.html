<div *ngIf="hasPermission('action.import')">
  <div class="panel panel-default">
    <div class="panel-heading">
      <strong class="text-u-c">
        <i class="fa fa-th"></i>
        &nbsp;{{'rewardPartyMember.ImportFile' | translate}}
      </strong>
    </div>
    <form [formGroup]="formImport">
      <div class="panel-body padding-xl ui-g">
        <div class="ui-g-12 vt-row">
          <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right required">
            {{'organization.label.name' | translate}}
          </label>
          <div class="ui-g-12 ui-md-6 ui-lg-3">
            <party-org-selector
              [property]="f['partyOrganizationId']"
              operationKey="action.import"
              adResourceKey="resource.rewardParty"
              [autoFocus]="true"
              [isRequiredField]="true"
              (onChange)="onChangePartyOrg($event)"
              #partyOrgSelector>
            </party-org-selector>
            <app-control-messages [control]="f['partyOrganizationId']"></app-control-messages>
          </div>
          <label class="ui-g-12 ui-md-6 ui-lg-3 control-label vt-align-right required">
            {{'rewardPartyMember.importDate' | translate}}
          </label>
          <div class="ui-g-12 ui-md-6 ui-lg-3">
            <date-picker [property]="f['importDate']"></date-picker>
            <app-control-messages [control]="f['importDate']"></app-control-messages>
          </div>
        </div>
        <div class="ui-g-12 vt-row">
          <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right required">
            {{'lable.workprocess.year' | translate}}
          </label>
          <div class="ui-g-12 ui-md-6 ui-lg-3">
            <select-filter
              [placeHolder]="'common.label.cboMustSelect'"
              [property]="f['year']"
              [options]="yearList"
              [optionLabel]="'year'"
              [optionValue]="'year'">
            </select-filter>
            <app-control-messages [control]="f['year']"></app-control-messages>
          </div>
          <label class="ui-g-12 ui-md-6 ui-lg-3 control-label vt-align-right required">
            {{'controls.choseFile' | translate}}
          </label>
          <div class="ui-g-12 ui-md-6 ui-lg-3">
              <file-chooser
              [property]="f['fileImport']"
              validMaxSize="50"
              validType="xls"
            >
            </file-chooser>
            <app-control-messages [control]="f['fileImport']"></app-control-messages>
            <br>
            <a class="text-link" (click)="processDownloadTemplate();">
              <span translate><i class="fa fa-download"></i> app.common.downloadTemplate</span>
            </a>
          </div>
        </div>
        <div class="ui-g-12 vt-row">
          <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right ">
            {{'rewardPartyMember.content' | translate}}
          </label>
          <div class="ui-g-12 ui-md-6 ui-lg-9">
            <textarea class="form-control" formControlName="content" maxlength="1000"></textarea>
            <app-control-messages [control]="f['content']"></app-control-messages>
          </div>
        </div>
      </div>
      <div class="panel-footer vt-area-button">
        <button type="submit" (click)="processImport()" class="btn btn-sm btn-info" [innerHTML]="'common.button.icon.save' | translate"></button>
        <button type="button" (click)="goBack()" class="btn btn-sm btn-danger" [innerHTML]="'common.button.out' | translate"></button>
      </div>
    </form>
  </div>
  <div *ngIf="dataError">
    <import-error [data]="dataError"></import-error>
  </div>
</div>
<div *ngIf="!hasPermission('action.import')">
{{'common.haveNoPermission' | translate}}
</div>
