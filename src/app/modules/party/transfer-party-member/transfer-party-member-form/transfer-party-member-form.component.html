<div class="card-form">
  <div class="clearfix">
    <div class="left-nav-bar pull-left row-header">
      <div>
        <img alt="back" class="img-fluid" src="./../../../../../../assets/images/home/Mask_Group_18824.png" (click)="goBack();">
        <span *ngIf="!formTransferPartyMember.get('transferPartyMemberId').value" class="title" translate>transferPartyMembers.addTrasferMembers</span>
        <span *ngIf="formTransferPartyMember.get('transferPartyMemberId').value && !isView" class="title" translate>transferPartyMembers.editTrasferMembers</span>
        <span *ngIf="formTransferPartyMember.get('transferPartyMemberId').value && isView" class="title" translate>transferPartyMembers.viewTrasferMembers</span>
      </div>
    </div>
    <div class="right-nav-bar pull-right left-option">
        <ul class="header-right sys-ul space-line">
          <li>
            <button class="btn btn-sm vt-btn mt-btn ng-star-inserted" type="button" (click)="goBack();" [innerHTML]="'common.button.out' | translate">
            </button>
          </li>
          <li *ngIf="!isView">
            <button class="btn btn-sm vt-btn btn-submit mt-btn ng-star-inserted" type="button" (click)="processSaveOrUpdate()" [innerHTML]="'common.button.icon.save' | translate">
            </button>
          </li>
          <li *ngIf="isView">
            <button class="btn btn-sm vt-btn btn-submit mt-btn btn-header-right ng-star-inserted" type="button" (click)="navigate()" [innerHTML]="'common.button.icon.edit' | translate">
            </button>
          </li>
        </ul>
    </div>
  </div>
</div>
<div class="info">
  <div *ngIf="hasPermission('action.insert') || hasPermission('action.update') || hasPermission('action.view')">
    <div class="panel panel-default card-info">
      <div class="panel-heading vt-relative">
          <strong>
              <!-- <span *ngIf="!formTransferPartyMember.get('transferPartyMemberId').value" translate>transferPartyMembers.addTrasferMembers</span>
              <span *ngIf="formTransferPartyMember.get('transferPartyMemberId').value && !isView" translate>transferPartyMembers.editTrasferMembers</span>
              <span *ngIf="formTransferPartyMember.get('transferPartyMemberId').value && isView" translate>transferPartyMembers.viewTrasferMembers</span> -->
              <span class="ml-2 title-info">Thông tin chuyển sinh hoạt Đảng</span>
          </strong>
      </div>
      <form id="formTransferPartyMember" [formGroup]="formTransferPartyMember">
          <div *ngIf="!isMobileScreen" class="panel-body padding-xl ui-g">
            <div class="ui-g-12 vt-row">
              <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right required">
                {{'transferPartyMembers.transferType' | translate}}
              </label>
              <div class="ui-g-12 ui-md-6 ui-lg-3">
                <select-filter
                    [property]="f['transferType']"
                    [options]="transferTypeList"
                    optionLabel="name"
                    optionValue="id"
                    autofocus="autofocus"
                    [placeHolder]="'common.label.cboMustSelect'"
                    (onChange)="onChangeStringCondition($event)"
                    [disabled]="isUpdate || isView ? true : false">
                  </select-filter>
                <app-control-messages [control]="f['transferType']"></app-control-messages>
              </div>
              <label class="ui-g-12 ui-md-6 ui-lg-3 control-label vt-align-right required">
                {{'transferPartyMembers.partyMember' | translate}}
              </label>
              <div class="ui-g-12 ui-md-6 ui-lg-3">
                <data-picker
                  [property]="f['employeeId']"
                  systemCode="political"
                  operationKey="action.view"
                  adResourceKey="resource.transferPartyMember"
                  objectBO="AllEmployeeBO"
                  codeField="employeeCode"
                  nameField="fullName"
                  emailField="email"
                  mobileNumberField="mobileNumber"
                  selectField="employeeId"
                  isRequiredField="true"
                  [filterCondition]="conditionPartyMember"
                  [isSearchByPartyDomainData]="isSearchByPartyDomainData"
                  (onChange)="onChangEmployeeCode($event)"
                  [disabled]="!formTransferPartyMember.get('transferType').value || isUpdate || isView ? true : false">
                </data-picker>
                <app-control-messages [control]="f['employeeId']"></app-control-messages>
              </div>
            </div>
            <div class="ui-g-12 vt-row">
              <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right">
                {{'transferPartyMembers.currentOrganization' | translate}}
              </label>
              <div class="ui-g-12 ui-md-6 ui-lg-3">
                <input type="text" class="form form-control" name="currentOrganization" formControlName="currentOrganization" [attr.disabled]="true">
                <app-control-messages [control]="f['currentOrganization']"></app-control-messages>
              </div>
              <label class="ui-g-12 ui-md-6 ui-lg-3 control-label vt-align-right">
                {{'transferPartyMembers.currentPosition' | translate}}
              </label>
              <div class="ui-g-12 ui-md-6 ui-lg-3">
                <input type="text" class="form form-control" name="currentPosition" formControlName="currentPosition" [attr.disabled]="true">
                <app-control-messages [control]="f['currentPosition']"></app-control-messages>
              </div>
            </div>
            <div class="ui-g-12 vt-row">
              <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
                {{'transferPartyMembers.oldPartyOrganization' | translate}}
              </label>
              <div class="ui-g-12 ui-md-3 ui-lg-3">
                <input type="text" class="form form-control" name="partyOrganizationOldName" formControlName="partyOrganizationOldName"
                  [attr.disabled]="!intoVtFromOut || isView ? true : null" maxlength="200"
                  [title]="formTransferPartyMember.get('partyOrganizationOldName').value">
                <app-control-messages [control]="f['partyOrganizationOldName']"></app-control-messages>
              </div>
            </div>
            <div class="ui-g-12 vt-row">
              <label [ngClass]="outOfVt ? 'ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right' : 'ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right required'">
                {{'transferPartyMembers.newPartyOrganization' | translate}}
              </label>
              <div class="ui-g-12 ui-md-3 ui-lg-3">
                <party-org-selector
                  [property]="f['partyOrganizationId']"
                  operationKey="action.view"
                  adResourceKey="resource.transferPartyMember"
                  isRequiredField="true"
                  [disabled]="!formTransferPartyMember.get('transferType').value || isView ? true : false"
                  [hidden]="outOfVt"
                  [rootId]="partyOrgRootId"
                  [filterCondition]="conditionPartyOrganization"
                  (onChange)="onChangeNewPartyOrg($event)"
                  #partyOrgSelector>
                </party-org-selector>
                <app-control-messages [control]="f['partyOrganizationId']"></app-control-messages>
                <input type="text" class="form form-control" name="partyOrganizationName" maxlength="200" formControlName="partyOrganizationName" [hidden]="!outOfVt" [attr.disabled]="!selectedType || isView ? true : null">
                <app-control-messages [control]="f['partyOrganizationName']"></app-control-messages>
              </div>
              <label class="ui-g-12 ui-md-3 ui-lg-3 control-label vt-align-right required" *ngIf="mustChoseBasicPatyOrg">
                {{'transferPartyMembers.newPartyBasic' | translate}}
              </label>
              <div class="ui-g-12 ui-md-3 ui-lg-3" *ngIf="mustChoseBasicPatyOrg">
                <!-- <select-filter
                    [property]="f['partyBasicId']"
                    [options]="basicPatyOrgList"
                    optionLabel="name"
                    optionValue="partyOrganizationId"
                    [placeHolder]="'common.label.cboMustSelect'"
                    [disabled]="isView ? true : false">
                  </select-filter> -->
                  <party-org-selector
                    [property]="f['partyBasicId']"
                    operationKey="action.view"
                    adResourceKey="resource.transferPartyMember"
                    [isRequiredField]="f['partyOrganizationId'].value ? true : false"
                    [disabled]="isView ? true : false"
                    [filterCondition]="conditionPartyBasicOrganization"
                    [rootId]="f['partyOrganizationId'].value"
                    (onChange)="onChangeNewPartyBasicOrg($event)"
                    #partyBasicOrg>
                  </party-org-selector>
                <app-control-messages [control]="f['partyBasicId']"></app-control-messages>
              </div>
            </div>
            <div class="ui-g-12 vt-row">
              <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
                {{'transferPartyMembers.description' | translate}}
              </label>
              <div class="ui-g-12 ui-md-9 ui-lg-9">
                <textarea maxlength="1000" style="height: 75px;" class="form form-control" name="description" formControlName="description" [attr.disabled]="!selectedType || isView ? true : null"></textarea>
                <app-control-messages [control]="f['description']"></app-control-messages>
              </div>
            </div>
          </div>
          <div *ngIf="isMobileScreen" class="panel-body padding-xl ui-g">
            <div class="ui-g-12 vt-row">
              <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right required">
                {{'transferPartyMembers.transferType' | translate}}
              </label>
              <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                <select-filter
                    [property]="f['transferType']"
                    [options]="transferTypeList"
                    optionLabel="name"
                    optionValue="id"
                    autofocus="autofocus"
                    [placeHolder]="'common.label.cboMustSelect'"
                    (onChange)="onChangeStringCondition($event)"
                    [disabled]="isUpdate || isView ? true : false">
                  </select-filter>
                <app-control-messages [control]="f['transferType']"></app-control-messages>
              </div>
            </div>
            <div class="ui-g-12 vt-row">
              <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-3 control-label vt-align-right required">
                {{'transferPartyMembers.partyMember' | translate}}
              </label>
              <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                <data-picker
                  [property]="f['employeeId']"
                  systemCode="political"
                  operationKey="action.view"
                  adResourceKey="resource.transferPartyMember"
                  objectBO="AllEmployeeBO"
                  codeField="employeeCode"
                  nameField="fullName"
                  emailField="email"
                  mobileNumberField="mobileNumber"
                  selectField="employeeId"
                  isRequiredField="true"
                  [filterCondition]="conditionPartyMember"
                  [isSearchByPartyDomainData]="isSearchByPartyDomainData"
                  (onChange)="onChangEmployeeCode($event)"
                  [disabled]="!formTransferPartyMember.get('transferType').value || isUpdate || isView ? true : false">
                </data-picker>
                <app-control-messages [control]="f['employeeId']"></app-control-messages>
              </div>
            </div>
            <div class="ui-g-12 vt-row">
              <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right">
                {{'transferPartyMembers.currentOrganization' | translate}}
              </label>
              <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                <input type="text" class="form form-control" name="currentOrganization" formControlName="currentOrganization" [attr.disabled]="true">
                <app-control-messages [control]="f['currentOrganization']"></app-control-messages>
              </div>
            </div>
            <div class="ui-g-12 vt-row">
              <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-3 control-label vt-align-right">
                {{'transferPartyMembers.currentPosition' | translate}}
              </label>
              <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                <input type="text" class="form form-control" name="currentPosition" formControlName="currentPosition" [attr.disabled]="true">
                <app-control-messages [control]="f['currentPosition']"></app-control-messages>
              </div>
            </div>
            <div class="ui-g-12 vt-row">
              <label class="ui-g-12 ui-md-3 ui-sm-3 ui-lg-2 control-label vt-align-right">
                {{'transferPartyMembers.oldPartyOrganization' | translate}}
              </label>
              <div class="ui-g-12 ui-md-3 ui-sm-9 ui-lg-3">
                <input type="text" class="form form-control" name="partyOrganizationOldName" formControlName="partyOrganizationOldName"
                  [attr.disabled]="!intoVtFromOut || isView ? true : null" maxlength="200"
                  [title]="formTransferPartyMember.get('partyOrganizationOldName').value">
                <app-control-messages [control]="f['partyOrganizationOldName']"></app-control-messages>
              </div>
            </div>
            <div class="ui-g-12 vt-row">
              <label [ngClass]="outOfVt ? 'ui-g-12 ui-md-3 ui-sm-3 ui-lg-2 control-label vt-align-right' : 'ui-g-12 ui-md-3 ui-sm-3 ui-lg-2 control-label vt-align-right required'">
                {{'transferPartyMembers.newPartyOrganization' | translate}}
              </label>
              <div class="ui-g-12 ui-md-3 ui-sm-9 ui-lg-3">
                <party-org-selector
                  [property]="f['partyOrganizationId']"
                  operationKey="action.view"
                  adResourceKey="resource.transferPartyMember"
                  isRequiredField="true"
                  [disabled]="!formTransferPartyMember.get('transferType').value || isView ? true : false"
                  [hidden]="outOfVt"
                  [rootId]="partyOrgRootId"
                  [filterCondition]="conditionPartyOrganization"
                  (onChange)="onChangeNewPartyOrg($event)"
                  #partyOrgSelector>
                </party-org-selector>
                <app-control-messages [control]="f['partyOrganizationId']"></app-control-messages>
                <input type="text" class="form form-control" name="partyOrganizationName" maxlength="200" formControlName="partyOrganizationName" [hidden]="!outOfVt" [attr.disabled]="!selectedType || isView ? true : null">
                <app-control-messages [control]="f['partyOrganizationName']"></app-control-messages>
              </div>
            </div>
            <div class="ui-g-12 vt-row">
              <label class="ui-g-12 ui-md-3 ui-sm-3 ui-lg-3 control-label vt-align-right required" *ngIf="mustChoseBasicPatyOrg">
                {{'transferPartyMembers.newPartyBasic' | translate}}
              </label>
              <div class="ui-g-12 ui-md-3 ui-sm-9 ui-lg-3" *ngIf="mustChoseBasicPatyOrg">
                <!-- <select-filter
                    [property]="f['partyBasicId']"
                    [options]="basicPatyOrgList"
                    optionLabel="name"
                    optionValue="partyOrganizationId"
                    [placeHolder]="'common.label.cboMustSelect'"
                    [disabled]="isView ? true : false">
                  </select-filter> -->
                  <party-org-selector
                    [property]="f['partyBasicId']"
                    operationKey="action.view"
                    adResourceKey="resource.transferPartyMember"
                    [isRequiredField]="f['partyOrganizationId'].value ? true : false"
                    [disabled]="isView ? true : false"
                    [filterCondition]="conditionPartyBasicOrganization"
                    [rootId]="f['partyOrganizationId'].value"
                    (onChange)="onChangeNewPartyBasicOrg($event)"
                    #partyBasicOrg>
                  </party-org-selector>
                <app-control-messages [control]="f['partyBasicId']"></app-control-messages>
              </div>
            </div>
            <div class="ui-g-12 vt-row">
              <label class="ui-g-12 ui-md-3 ui-sm-3 ui-lg-2 control-label vt-align-right">
                {{'transferPartyMembers.description' | translate}}
              </label>
              <div class="ui-g-12 ui-md-9 ui-sm-9 ui-lg-9">
                <textarea maxlength="1000" style="height: 75px;" class="form form-control" name="description" formControlName="description" [attr.disabled]="!selectedType || isView ? true : null"></textarea>
                <app-control-messages [control]="f['description']"></app-control-messages>
              </div>
            </div>
          </div>
      </form>
    </div>
  </div>
  <div *ngIf="!hasPermission('action.insert') && !hasPermission('action.update') && !hasPermission('action.view')">
    {{'common.haveNoPermission' | translate}}
  </div>
</div>
