<div class="card-form">
  <div class="clearfix">
    <div class="left-nav-bar pull-left row-header">
      <div>
        <img alt="back" class="img-fluid" src="./../../../../../../assets/images/home/Mask_Group_18824.png" (click)="goBack();">
        <span *ngIf="createPlan" class="title"> {{'resolutionQuarterYear.createCriteria' | translate}} </span>
        <span *ngIf="isView" class="title"> {{'resolutionQuarterYear.viewDetailCriteria' | translate}} </span>
        <span *ngIf="isInsertContentCriteria" class="title"> {{'resolutionQuarterYear.doCriteria' | translate}} </span>
      </div>
    </div>
    <div class="right-nav-bar pull-right left-option">
        <ul class="header-right sys-ul space-line">
          <li *ngIf="!((isInsertContentCriteria && !havePermission) || isRoot || isView)">
            <button class="btn btn-sm vt-btn btn-submit mt-btn ng-star-inserted" type="button" (click)="processSaveOrUpdate()" [innerHTML]="'common.button.icon.save' | translate">
            </button>
          </li>
          <li *ngIf="!isRoot && isHaveHistory > 0 && ((isInsertContentCriteria && havePermission) || isView)">
            <button class="btn btn-sm vt-btn btn-submit mt-btn ng-star-inserted" type="button" (click)="showCriteriaHistory()" [innerHTML]="'common.button.table.actHistoryContent' | translate">
            </button>
          </li>
          <li>
            <button class="btn btn-sm vt-btn mt-btn ng-star-inserted" type="button" (click)="goBack();" [innerHTML]="'common.button.out' | translate">
            </button>
          </li>
        </ul>
    </div>
  </div>
</div>
<div class="info">
  <div *ngIf="hasPermission('action.update')">
    <div id="savePage">
      <div class="panel panel-default card-info">
        <form id="formShow" [formGroup]="formShow">
          <div class="panel-heading">
            <strong>
              <!-- <span *ngIf="createPlan"> {{'resolutionQuarterYear.createCriteria' | translate}} </span>
              <span *ngIf="isView"> {{'resolutionQuarterYear.viewDetailCriteria' | translate}} </span>
              <span *ngIf="isInsertContentCriteria"> {{'resolutionQuarterYear.doCriteria' | translate}} </span> -->
              <span class="ml-2 title-info">Thông tin tiêu chí</span>
            </strong>
          </div>
          <div class="panel-body padding-xl ui-g" >
            <div *ngIf="!isMobileScreen">
              <div class="ui-g-12 vt-row">
                <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right">
                  {{'common.label.unit' | translate}}
                </label>
                <div class="ui-g-12 ui-md-6 ui-lg-3">
                  <org-selector
                    [property]="f['organizationId']"
                    operationKey="action.view"
                    adResourceKey="resource.partyOrganization"
                    [isRequiredField]="true"
                    [disabled]="true"
                    [defaultValue]="true">
                  </org-selector>
                  <app-control-messages [control]="f['organizationId']"></app-control-messages>
                </div>
                <label class="ui-g-12 ui-md-6 ui-lg-3 control-label vt-align-right">
                  {{'resolutionQuarterYear.finishDate' | translate}}
                </label>
                <div class="ui-g-12 ui-md-6 ui-lg-3">
                  <date-picker
                    [property]="f['finishDate']"
                    [disabled]="true">
                  </date-picker>
                  <app-control-messages [control]="f['finishDate']"></app-control-messages>
                </div>
              </div>
              <div class="ui-g-12 vt-row">
                <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right">
                  {{'resolutionQuarterYear.resolutionNumber' | translate}}
                </label>
                <div class="ui-g-12 ui-md-6 ui-lg-3">
                  <input type="text" id="resolutionsNumber2" [attr.disabled]="true" class="form form-control" name="resolutionsNumber" formControlName="resolutionsNumber" maxlength="100">
                  <app-control-messages [control]="f['resolutionsNumber']"></app-control-messages>
                </div>
                <label class="ui-g-12 ui-md-6 ui-lg-3 control-label vt-align-right">
                    {{'resolutionQuarterYear.resolutionName' | translate}}
                </label>
                <div class="ui-g-12 ui-md-6 ui-lg-3">
                  <input type="text" class="form form-control" [attr.disabled]="true" name="resolutionsName" formControlName="resolutionsName" maxlength="200">
                  <app-control-messages [control]="f['resolutionsName']"></app-control-messages>
                </div>
              </div>             
            </div>
            <div *ngIf="isMobileScreen">
              <div class="ui-g-12 vt-row">
                <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right">
                  {{'common.label.unit' | translate}}
                </label>
                <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                  <org-selector
                    [property]="f['organizationId']"
                    operationKey="action.view"
                    adResourceKey="resource.partyOrganization"
                    [isRequiredField]="true"
                    [disabled]="true"
                    [defaultValue]="true">
                  </org-selector>
                  <app-control-messages [control]="f['organizationId']"></app-control-messages>
                </div>
              </div>
              <div class="ui-g-12 vt-row">
                <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-3 control-label vt-align-right">
                  {{'resolutionQuarterYear.finishDate' | translate}}
                </label>
                <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                  <date-picker
                    [property]="f['finishDate']"
                    [disabled]="true">
                  </date-picker>
                  <app-control-messages [control]="f['finishDate']"></app-control-messages>
                </div>
              </div>
              <div class="ui-g-12 vt-row">
                <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right">
                  {{'resolutionQuarterYear.resolutionNumber' | translate}}
                </label>
                <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                  <input type="text" id="resolutionsNumber2" [attr.disabled]="true" class="form form-control" name="resolutionsNumber" formControlName="resolutionsNumber" maxlength="100">
                  <app-control-messages [control]="f['resolutionsNumber']"></app-control-messages>
                </div>
              </div>
              <div class="ui-g-12 vt-row">
                <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-3 control-label vt-align-right">
                    {{'resolutionQuarterYear.resolutionName' | translate}}
                </label>
                <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                  <input type="text" class="form form-control" [attr.disabled]="true" name="resolutionsName" formControlName="resolutionsName" maxlength="200">
                  <app-control-messages [control]="f['resolutionsName']"></app-control-messages>
                </div>
              </div>             
            </div>
            <div class="ui-g-12 vt-row" >
              <div class="ui-g-12 mt30">
                <div class="ui-g-12 ui-md-3 ui-sm-12 ui-lg-3">
                  <div class="panel panel-default card-info">
                    <div class="panel-heading vt-relative">
                      <strong>
                        <span class="title-info" translate>resolutionQuarterYear.criteriaTree</span>
                      </strong>
                      <div class="vt-absolute vt-shotcut-button-in-heading">
                        <button id="btnExport" type="button" class="btn-icon plus" *ngIf="hasPermission('action.export') && !isInsertContentCriteria" [title]="'common.header.export' | translate" (click)="export()"><span class="fa fa-download color-info"></span></button>
                        &nbsp;
                        <button id="btnSaveTree" *ngIf="isSaveTree" type="button" class="btn-icon plus" [title]="'common.button.save' | translate" (click)="saveTree()"><span class="fa fa-save color-info"></span></button>
                      </div>
                    </div>
                    <div class="panel-body padding-xl" style="padding: 10px;">
                      <criteria-plan-tree
                        #tree
                        (onEditNode)="editCriteria($event)"
                        [rootId]="requestResolutionsId">
                      </criteria-plan-tree>
                    </div>
                  </div>
                </div>
                <div class="ui-g-12 ui-md-9 ui-sm-12 ui-lg-9">
                    <div class="panel panel-default card-info">
                        <form id="formSaveCriteria" [formGroup]="formSaveCriteria">
                          <div class="panel-heading vt-relative">
                            <strong>
                              <span class="title-info" translate>resolutionQuarterYear.criteriaInfo</span>
                            </strong>
                          </div>
                          <div *ngIf="!isMobileScreen" class="panel-body padding-xl ui-g" [hidden]="isRoot">
                            <div class="ui-g-12 vt-row">
                              <label [ngClass]="createPlan && isChecked ? 'ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right required' : 'ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right'">
                                {{'common.label.unit' | translate}}
                              </label>
                              <div class="ui-g-12 ui-md-6 ui-lg-3">
                                <org-selector
                                  [property]="fCriteria['organizationId']"
                                  operationKey="action.view"
                                  adResourceKey="resource.partyOrganization"
                                  [disabled]="isInsertContentCriteria || !isChecked || isView"
                                  [isRequiredField]="true"
                                  [rootId]="rootId"
                                  (onChange)="onChangeOrgDoCriteria($event, orgSelector)"
                                  #orgSelector>
                                </org-selector>
                                <app-control-messages [control]="fCriteria['organizationId']"></app-control-messages>
                              </div>
                              <label class="ui-g-12 ui-md-6 ui-lg-3 control-label vt-align-right">
                                {{'resolutionQuarterYear.isInputContent' | translate}}
                              </label>
                              <div class="ui-g-12 ui-md-6 ui-lg-3">
                                <div class="display-table w100">
                                  <div class="table-cell" style="width: 50px;">
                                      <p-inputSwitch id="isInputContent" (onChange)="onChangeIsInputContent($event, orgSelector)" formControlName="isInputContent" [disabled]="isInsertContentCriteria || isView"></p-inputSwitch> 
                                  </div>
                                  <div class="table-cell">
                                      <label class="vt-align-right" style="font-weight: bold;">{{isInputContent}}</label>
                                  </div>
                                </div>
                                <app-control-messages [control]="fCriteria['isInputContent']"></app-control-messages>
                              </div>
                            </div>
                            <div class="ui-g-12 vt-row">
                              <label [ngClass]="createPlan ? 'ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right required' : 'ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right'">
                                {{'resolutionQuarterYear.criteriaName' | translate}}
                              </label>
                              <div class="ui-g-12 ui-md-6 ui-lg-3">
                                <input othertype="textWithSpec" id="criteriaName" #criteriaName [attr.disabled]="isInsertContentCriteria || isView ? '' : null" class="form form-control" name="criteriaName" formControlName="criteriaName" maxlength="500">
                                <app-control-messages [control]="fCriteria['criteriaName']"></app-control-messages>
                              </div>
                              <label class="ui-g-12 ui-md-6 ui-lg-3 control-label vt-align-right">
                                {{'resolutionQuarterYear.criteriaParentName' | translate}}
                              </label>
                              <div class="ui-g-12 ui-md-6 ui-lg-3">
                                <input type="text" [attr.disabled]="true" id="criteriaParentName" class="form form-control" name="criteriaParentName" formControlName="criteriaParentName" maxlength="500">
                                <app-control-messages [control]="fCriteria['criteriaParentName']"></app-control-messages>
                              </div>
                            </div>
                            <div class="ui-g-12 vt-row">
                              <label class="ui-g-12 ui-md-6 ui-lg-2 control-label vt-align-right">
                                {{'resolutionQuarterYear.criteriaOrder' | translate}}
                              </label>
                              <div class="ui-g-12 ui-md-6 ui-lg-3">
                                <input type="text" [attr.disabled]="true" id="criteriaOrder" class="form form-control" name="criteriaOrder" formControlName="criteriaOrder" maxlength="4">
                                <app-control-messages [control]="fCriteria['criteriaOrder']"></app-control-messages>
                              </div>
                              <label class="ui-g-12 ui-md-6 ui-lg-3 control-label vt-align-right">
                                {{'common.label.attachmentFile' | translate}}
                              </label>
                              <div class="ui-g-12 ui-md-6 ui-lg-3">
                                <file-chooser
                                  [disabled]="createPlan || (isInsertContentCriteria && !havePermission) || isView"
                                  [property]="fCriteria['file']"
                                  [validMaxSize]="10"
                                  validType="doc,docx,pdf">
                                </file-chooser>
                                <app-control-messages [control]="fCriteria['file']"></app-control-messages>
                              </div>
                            </div>
                            <div class="ui-g-12 vt-row">
                              <label [ngClass]="createPlan ? 'ui-g-12 ui-md3 ui-lg-2 control-label vt-align-right' : 'ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right required'">
                                {{'resolutionQuarterYear.criteriaContent' | translate}}
                              </label>
                              <div class="ui-g-12 ui-md-9 ui-lg-9">
                                <textarea maxlength="5000" id="content" #content [attr.disabled]="createPlan || (isInsertContentCriteria && !havePermission) || isView ? '' : null" class="form form-control" name="content" formControlName="content" style="height: 351px;"></textarea>
                                <app-control-messages [control]="fCriteria['content']"></app-control-messages>
                              </div>
                            </div>
                          </div>
                          <div *ngIf="isMobileScreen" class="panel-body padding-xl ui-g" [hidden]="isRoot">
                            <div class="ui-g-12 vt-row">
                              <label [ngClass]="createPlan && isChecked ? 'ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right required' : 'ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right'">
                                {{'common.label.unit' | translate}}
                              </label>
                              <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                                <org-selector
                                  [property]="fCriteria['organizationId']"
                                  operationKey="action.view"
                                  adResourceKey="resource.partyOrganization"
                                  [disabled]="isInsertContentCriteria || !isChecked || isView"
                                  [isRequiredField]="true"
                                  [rootId]="rootId"
                                  (onChange)="onChangeOrgDoCriteria($event, orgSelector)"
                                  #orgSelector>
                                </org-selector>
                                <app-control-messages [control]="fCriteria['organizationId']"></app-control-messages>
                              </div>
                            </div>
                            <div class="ui-g-12 vt-row">
                              <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-3 control-label vt-align-right">
                                {{'resolutionQuarterYear.isInputContent' | translate}}
                              </label>
                              <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                                <div class="display-table w100">
                                  <div class="table-cell" style="width: 50px;">
                                      <p-inputSwitch id="isInputContent" (onChange)="onChangeIsInputContent($event, orgSelector)" formControlName="isInputContent" [disabled]="isInsertContentCriteria || isView"></p-inputSwitch> 
                                  </div>
                                  <div class="table-cell">
                                      <label class="vt-align-right" style="font-weight: bold;">{{isInputContent}}</label>
                                  </div>
                                </div>
                                <app-control-messages [control]="fCriteria['isInputContent']"></app-control-messages>
                              </div>
                            </div>
                            <div class="ui-g-12 vt-row">
                              <label [ngClass]="createPlan ? 'ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right required' : 'ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right'">
                                {{'resolutionQuarterYear.criteriaName' | translate}}
                              </label>
                              <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                                <input othertype="textWithSpec" id="criteriaName" #criteriaName [attr.disabled]="isInsertContentCriteria || isView ? '' : null" class="form form-control" name="criteriaName" formControlName="criteriaName" maxlength="500">
                                <app-control-messages [control]="fCriteria['criteriaName']"></app-control-messages>
                              </div>
                            </div>
                            <div class="ui-g-12 vt-row">
                              <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-3 control-label vt-align-right">
                                {{'resolutionQuarterYear.criteriaParentName' | translate}}
                              </label>
                              <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                                <input type="text" [attr.disabled]="true" id="criteriaParentName" class="form form-control" name="criteriaParentName" formControlName="criteriaParentName" maxlength="500">
                                <app-control-messages [control]="fCriteria['criteriaParentName']"></app-control-messages>
                              </div>
                            </div>
                            <div class="ui-g-12 vt-row">
                              <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-2 control-label vt-align-right">
                                {{'resolutionQuarterYear.criteriaOrder' | translate}}
                              </label>
                              <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                                <input type="text" [attr.disabled]="true" id="criteriaOrder" class="form form-control" name="criteriaOrder" formControlName="criteriaOrder" maxlength="4">
                                <app-control-messages [control]="fCriteria['criteriaOrder']"></app-control-messages>
                              </div>
                            </div>
                            <div class="ui-g-12 vt-row">
                              <label class="ui-g-12 ui-md-6 ui-sm-3 ui-lg-3 control-label vt-align-right">
                                {{'common.label.attachmentFile' | translate}}
                              </label>
                              <div class="ui-g-12 ui-md-6 ui-sm-9 ui-lg-3">
                                <file-chooser
                                  [disabled]="createPlan || (isInsertContentCriteria && !havePermission) || isView"
                                  [property]="fCriteria['file']"
                                  [validMaxSize]="10"
                                  validType="doc,docx,pdf">
                                </file-chooser>
                                <app-control-messages [control]="fCriteria['file']"></app-control-messages>
                              </div>
                            </div>
                            <div class="ui-g-12 vt-row">
                              <label [ngClass]="createPlan ? 'ui-g-12 ui-md-3 ui-sm-3 ui-lg-2 control-label vt-align-right' : 'ui-g-12 ui-md-3 ui-sm-3 ui-lg-2 control-label vt-align-right required'">
                                {{'resolutionQuarterYear.criteriaContent' | translate}}
                              </label>
                              <div class="ui-g-12 ui-md-9 ui-sm-9 ui-lg-9">
                                <textarea maxlength="5000" id="content" #content [attr.disabled]="createPlan || (isInsertContentCriteria && !havePermission) || isView ? '' : null" class="form form-control" name="content" formControlName="content" style="height: 351px;"></textarea>
                                <app-control-messages [control]="fCriteria['content']"></app-control-messages>
                              </div>
                            </div>
                          </div>
                        </form>
                    </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
  <div *ngIf="!hasPermission('action.update')">
    {{'common.haveNoPermission' | translate}}
  </div> 
</div>