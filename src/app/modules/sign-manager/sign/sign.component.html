<form [formGroup]="formGroup">
  <div class="page">
    <div class="detail-area">
      <div class="panel panel-default card-info">
        <div class="panel-heading">
          <strong class="title">{{'common.button.signInfor' | translate}}</strong>
        </div>
        <!--pannel-body div-->
        <div *ngIf="!isMobileScreen" class="panel-body padding-xl ui-g">
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right  required">
              {{'label.resolutionsMonth.extractingTextContent' | translate}}
            </label>
            <div class="ui-g-12 ui-md-3 ui-lg-3">
              <input type="text" [autoFocus]="true" formControlName="extractingTextContent" name="extractingTextContent"
                class="form-control" required maxlength="250" autofocus>
              <app-control-messages [control]="f['extractingTextContent']"></app-control-messages>
            </div>
            <label class="ui-g-12 ui-md-3 ui-lg-3 control-label vt-align-right required">
              {{'label.resolutionsMonth.professions' | translate}}
            </label>
            <div class="ui-g-12 ui-md-3 ui-lg-3">
              <select-filter 
                [property]="f['professions']" 
                [options]="listCbb" 
                optionLabel="parName"
                optionValue="parValue" 
                [placeHolder]="'common.label.cboMustSelect'">
              </select-filter>
              <app-control-messages [control]="f['professions']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right required">
              {{'label.resolutionsMonth.formalityText' | translate}}
            </label>
            <div class="ui-g-12 ui-md-3 ui-lg-3">
              <select-filter 
                [property]="f['formalityText']" 
                [options]="listTextF" 
                optionLabel="parName"
                optionValue="parValue" 
                [placeHolder]="'common.label.cboMustSelect'"
                >
              </select-filter>
              <app-control-messages [control]="f['formalityText']"></app-control-messages>
            </div>
            <label class="ui-g-12 ui-md-3 ui-lg-3 control-label vt-align-right required">
              {{'label.resolutionsMonth.textSymbols' | translate}}
            </label>
            <div class="ui-g-12 ui-md-3 ui-lg-3">
              <input type="text" 
                formControlName="textSymbols" 
                name="textSymbols" 
                class="form-control" 
                required
                maxlength="100">
              <app-control-messages [control]="f['textSymbols']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right required">
              {{'common.label.fileSign' | translate}}
            </label>
            <div class="ui-g-12 ui-md-3 ui-lg-3">
              <file-chooser [property]="f['signFile']" [validMaxSize]="50" validType="pdf">
              </file-chooser>
              <app-control-messages [control]="f['signFile']"></app-control-messages>
              <br *ngIf="f['signType'].value === 'transfer-party-member'">
              <a *ngIf="f['signType'].value === 'transfer-party-member'" class="text-link" (click)="processDownloadTransferPartyMemberTemplate();">
                <span translate><i class="fa fa-download"></i> app.common.downloadTemplate</span>
              </a>
            </div>
            <label class="ui-g-12 ui-md-3 ui-lg-3 control-label vt-align-right" [ngClass]="signType === 'resolution-month' ? 'required' : ''">
              {{'common.label.fileDocument' | translate}}
            </label>
            <div class="ui-g-12 ui-md-3 ui-lg-3">
              <multi-file-chooser 
                [property]="f['fileAttachment']" 
                fileName="fileAttachment" 
                [validMaxSize]="50"
                [moveFile] = "true"
                validType="xls,doc,pdf">
              </multi-file-chooser>
              <app-control-messages [control]="f['fileAttachment']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
              {{'common.label.appendixFileForm2' | translate}}
            </label>
            <div class="ui-g-12 ui-md-3 ui-lg-3">
              <multi-file-chooser 
                [property]="f['appendixFileForm']" 
                fileName="appendixFileForm" 
                [validMaxSize]="50"
                [moveFile] = "true"
                validType="xls,doc,pdf">
            </multi-file-chooser>
              <app-control-messages [control]="f['appendixFileForm']"></app-control-messages>
            </div>
            <label class="ui-g-12 ui-md-3 ui-lg-3 control-label vt-align-right">
              {{'common.label.attachedDocuments' | translate}}
            </label>
            <div class="ui-g-12 ui-md-3 ui-lg-3">
              <multi-file-chooser 
                [property]="f['attachedDocuments']" 
                fileName="attachedDocuments" 
                [validMaxSize]="50"
                [moveFile] = "true"
                validType="xls,doc,pdf">
              </multi-file-chooser>
              <app-control-messages [control]="f['attachedDocuments']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right required">
              {{'common.label.userVoffice' | translate}}
            </label>
            <div class="ui-g-12 ui-md-3 ui-lg-3">
              <input type="text" formControlName="vofficeUser" name="vofficeUser" class="form-control" maxlength="100">
              <app-control-messages [control]="f['vofficeUser']"></app-control-messages>
            </div>
            <label class="ui-g-12 ui-md-3 ui-lg-3 control-label vt-align-right required">
              {{'common.label.passwordVoffice' | translate}}
            </label>
            <div class="ui-g-12 ui-md-3 ui-lg-3">
              <input type="password" formControlName="vofficePassword" name="vofficePassword" class="form-control"
                maxlength="100">
              <app-control-messages [control]="f['vofficePassword']"></app-control-messages>
            </div>
          </div>
        </div>
        <div *ngIf="isMobileScreen" class="panel-body padding-xl ui-g">
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-3 ui-sm-3 ui-lg-2 control-label vt-align-right  required">
              {{'label.resolutionsMonth.extractingTextContent' | translate}}
            </label>
            <div class="ui-g-12 ui-md-3 ui-sm-9 ui-lg-3">
              <input type="text" [autoFocus]="true" formControlName="extractingTextContent" name="extractingTextContent"
                class="form-control" required maxlength="250" autofocus>
              <app-control-messages [control]="f['extractingTextContent']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-3 ui-sm-3 ui-lg-3 control-label vt-align-right required">
              {{'label.resolutionsMonth.professions' | translate}}
            </label>
            <div class="ui-g-12 ui-md-3 ui-sm-9 ui-lg-3">
              <select-filter 
                [property]="f['professions']" 
                [options]="listCbb" 
                optionLabel="parName"
                optionValue="parValue" 
                [placeHolder]="'common.label.cboMustSelect'">
              </select-filter>
              <app-control-messages [control]="f['professions']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-3 ui-sm-3 ui-lg-2 control-label vt-align-right required">
              {{'label.resolutionsMonth.formalityText' | translate}}
            </label>
            <div class="ui-g-12 ui-md-3 ui-sm-9 ui-lg-3">
              <select-filter 
                [property]="f['formalityText']" 
                [options]="listTextF" 
                optionLabel="parName"
                optionValue="parValue" 
                [placeHolder]="'common.label.cboMustSelect'"
                >
              </select-filter>
              <app-control-messages [control]="f['formalityText']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-3 ui-sm-3 ui-lg-3 control-label vt-align-right required">
              {{'label.resolutionsMonth.textSymbols' | translate}}
            </label>
            <div class="ui-g-12 ui-md-3 ui-sm-9 ui-lg-3">
              <input type="text" 
                formControlName="textSymbols" 
                name="textSymbols" 
                class="form-control" 
                required
                maxlength="100">
              <app-control-messages [control]="f['textSymbols']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-3 ui-sm-3 ui-lg-2 control-label vt-align-right required">
              {{'common.label.fileSign' | translate}}
            </label>
            <div class="ui-g-12 ui-md-3 ui-sm-9 ui-lg-3">
              <file-chooser [property]="f['signFile']" [validMaxSize]="50" validType="pdf">
              </file-chooser>
              <app-control-messages [control]="f['signFile']"></app-control-messages>
              <br *ngIf="f['signType'].value === 'transfer-party-member'">
              <a *ngIf="f['signType'].value === 'transfer-party-member'" class="text-link" (click)="processDownloadTransferPartyMemberTemplate();">
                <span translate><i class="fa fa-download"></i> app.common.downloadTemplate</span>
              </a>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-3 ui-sm-3 ui-lg-3 control-label vt-align-right" [ngClass]="signType === 'resolution-month' ? 'required' : ''">
              {{'common.label.fileDocument' | translate}}
            </label>
            <div class="ui-g-12 ui-md-3 ui-sm-9 ui-lg-3">
              <multi-file-chooser
                class="attachment-file"
                [property]="f['fileAttachment']" 
                fileName="fileAttachment" 
                [validMaxSize]="50"
                [moveFile] = "true"
                validType="xls,doc,pdf">
              </multi-file-chooser>
              <app-control-messages [control]="f['fileAttachment']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-3 ui-sm-3 ui-lg-2 control-label vt-align-right">
              {{'common.label.appendixFileForm2' | translate}}
            </label>
            <div class="ui-g-12 ui-md-3 ui-sm-9 ui-lg-3">
              <multi-file-chooser
                class="attachment-file" 
                [property]="f['appendixFileForm']" 
                fileName="appendixFileForm" 
                [validMaxSize]="50"
                [moveFile] = "true"
                validType="xls,doc,pdf">
            </multi-file-chooser>
              <app-control-messages [control]="f['appendixFileForm']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-3 ui-sm-3 ui-lg-3 control-label vt-align-right">
              {{'common.label.attachedDocuments' | translate}}
            </label>
            <div class="ui-g-12 ui-md-3 ui-sm-9 ui-lg-3">
              <multi-file-chooser
                class="attachment-file" 
                [property]="f['attachedDocuments']" 
                fileName="attachedDocuments" 
                [validMaxSize]="50"
                [moveFile] = "true"
                validType="xls,doc,pdf">
              </multi-file-chooser>
              <app-control-messages [control]="f['attachedDocuments']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-3 ui-sm-3 ui-lg-2 control-label vt-align-right required">
              {{'common.label.userVoffice' | translate}}
            </label>
            <div class="ui-g-12 ui-md-3 ui-sm-9 ui-lg-3">
              <input type="text" formControlName="vofficeUser" name="vofficeUser" class="form-control" maxlength="100">
              <app-control-messages [control]="f['vofficeUser']"></app-control-messages>
            </div>
          </div>
          <div class="ui-g-12 vt-row">
            <label class="ui-g-12 ui-md-3 ui-sm-3 ui-lg-3 control-label vt-align-right required">
              {{'common.label.passwordVoffice' | translate}}
            </label>
            <div class="ui-g-12 ui-md-3 ui-sm-9 ui-lg-3">
              <input type="password" formControlName="vofficePassword" name="vofficePassword" class="form-control"
                maxlength="100">
              <app-control-messages [control]="f['vofficePassword']"></app-control-messages>
            </div>
          </div>
        </div>
      </div>
      <div class="panel panel-default card-info">
        <div class="panel-heading">
          <strong class="title">{{'managerSign.listSignerTitle' | translate}}</strong>
        </div>
        <div class="panel-body panel-table" style="padding: 0 12px 12px 12px;">
          <p-table [scrollable]="true" [value]="formSigner.controls"
            tableStyleClass="table table-wrapper table-hover table-striped b-t b-b" styleClass="controlOverflow" [resizableColumns]="true">
            <ng-template pTemplate="colgroup" let-columns>
              <colgroup>
                <col style="width: 50px;">
                <col style="width: 300px;">
                <col>
                <col style="width: 200px;">
                <col style="width: 100px;">
                <col style="width: 100px;">
              </colgroup>
            </ng-template>
            <ng-template pTemplate="header">
              <tr>
                <th translate pResizableColumn>common.table.index</th>
                <th translate pResizableColumn><span class="required">managerSign.listSigner.employeeId</span></th>
                <th translate pResizableColumn><span class="required">managerSign.listSigner.userVofficeId</span></th>
                <th translate pResizableColumn>managerSign.listSigner.signImageIndex</th>
                <th translate pResizableColumn>common.label.order</th>
                <th translate pResizableColumn>common.label.action</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-item let-index="rowIndex">
              <tr [formGroup]="item">
                <td class="vt-align-center">
                  {{index+1}}
                </td>
                <td>
                  <data-picker 
                    [property]="item.controls.employeeId" 
                    systemCode="political" 
                    operationKey="action.view"
                    adResourceKey="resource.signDocument" 
                    objectBO="EmployeeBO" 
                    codeField="employeeCode"
                    nameField="fullName"
                    emailField="email"
                    mobileNumberField="mobileNumber"
                    selectField="employeeId" 
                    (onChange)="loadUserVoffice($event, item)" 
                    isNotSearchByOrgDomainData="true"
                    [filterCondition]="' AND obj.status = 1'"
                    [isRequiredField]="true"
                    >
                  </data-picker>
                  <app-control-messages [control]="item.controls.employeeId"></app-control-messages>
                </td>
                <td>
                  <select-filter [property]="item.controls.userVofficeId" [options]="item.listVofficeUser"
                    optionLabel="label" optionValue="value" [placeHolder]="'common.label.cboMustSelect'">
                  </select-filter>
                  <app-control-messages [control]="item.controls.userVofficeId"></app-control-messages>
                </td>
                <td class="vt-align-center">                  
                  <label class="i-checks">                    
                    <input [formControl]="item.controls.signImageIndex" type="checkbox" />
                    <i></i>
                  </label>
                </td>
                <td class="vt-align-center">
                  <button *ngIf="index > 0" class="btn-icon plus" type="button" [title]="'titleAdd' | translate"
                    (click)="upSigner(index)" [innerHTML]="'common.icon.up' | translate">
                  </button>
                  <button *ngIf="index != formSigner.controls.length - 1" class="btn-icon plus" type="button" [title]="'titleAdd' | translate"
                    (click)="downSigner(index)" [innerHTML]="'common.icon.down' | translate">
                  </button>
                </td>
                <td class="vt-align-center">
                  <button class="btn-icon plus" type="button" [title]="'titleAdd' | translate"
                    (click)="addSigner(index, item)" [innerHTML]="'common.icon.plus' | translate">
                  </button>
                  <button class="btn-icon minus" type="button" [title]="'titleDelete' | translate"
                    (click)="removeSigner(index, item)" [innerHTML]="'common.icon.minus' | translate">
                  </button>
                </td>
              </tr>
            </ng-template>
          </p-table>
        </div>
        <div class="panel-footer vt-area-button">
          <button  *ngIf="hasPermission('action.update')" type="submit" (click)="onSignature();" class="btn btn-sm vt-btn btn-submit">
            <span [innerHTML]="'common.button.sign' | translate"></span>
          </button>
          <button type="button" (click)="onClose();" class="btn btn-sm vt-btn"
            [innerHTML]="'common.button.out' | translate"></button>
        </div>
      </div>
    </div>
  </div>
</form>