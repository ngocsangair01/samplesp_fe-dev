<div class="card-form">
    <div class="clearfix">
      <div class="left-nav-bar pull-left row-header">
        <div>
          <img alt="back" class="img-fluid" src="./../../../../../../assets/images/home/Mask_Group_18824.png" (click)="goBack();">
          <span *ngIf="isView" class="title" translate>letterDenunciation.title.view</span>
          <span *ngIf="isInsert" class="title" translate>letterDenunciation.title.add</span>
          <span *ngIf="isUpdate" class="title" translate>letterDenunciation.title.edit</span>
        </div>
      </div>
      <div class="right-nav-bar pull-right left-option">
          <ul class="header-right sys-ul space-line">
            <li>
                <button class="btn btn-sm vt-btn mt-btn ng-star-inserted" type="button" (click)="goBack();" [innerHTML]="'common.button.out' | translate">
                </button>
            </li>
            <li *ngIf="isInsert || isUpdate">
                <button class="btn btn-sm vt-btn btn-submit mt-btn ng-star-inserted" type="button" (click)="processSaveOrUpdate()" [innerHTML]="'common.button.icon.save' | translate">
                </button>
            </li>
            <li *ngIf="isView">
                <button class="btn btn-sm vt-btn btn-submit mt-btn btn-header-right ng-star-inserted" type="button" (click)="navigate()" [innerHTML]="'common.button.icon.edit' | translate">
                </button>
            </li>
          </ul>
      </div>
    </div>
</div>
<div class="info">
    <div
        *ngIf="(hasPermission('action.view') && isView) || (hasPermission('action.update') && isUpdate) || (hasPermission('action.insert') && isInsert)">
        <div class="panel panel-default card-info">
            <div class="panel-heading vt-relative">
                <strong>
                    <!-- <span *ngIf="isView" translate>letterDenunciation.title.view</span>
                    <span *ngIf="isInsert" translate>letterDenunciation.title.add</span>
                    <span *ngIf="isUpdate" translate>letterDenunciation.title.edit</span> -->
                    <span class="ml-2 title-info">Thông tin đơn thư tố cáo, khiếu nại kỷ luật Đảng</span>
                </strong>
            </div>
            <div class="panel-body padding-xl ui-g">
                <form id="formSave" [formGroup]="formSave">
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right"
                            [ngClass]="isView?'':'required'">
                            {{ 'letterDenunciation.label.type' | translate }}
                        </label>
                        <div class="ui-g-12 ui-md-9 ui-lg-9">
                            <div class="form-check-inline">
                                <div style="padding-left: 15px" *ngFor="let item of types">
                                    <p-radioButton formControlName="type" name="type" [value]="item.value"
                                        [label]="item.label" [disabled]="isView" (onClick)="onChangeType($event)">
                                    </p-radioButton>
                                </div>
                                <app-control-messages [control]="f['type']"></app-control-messages>
                            </div>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row" >
                        <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right"
                            [ngClass]="isView?'':'required'">
                            {{ 'letterDenunciation.label.category' | translate }}
                        </label>
                        <div class="ui-g-12 ui-md-9 ui-lg-9">
                            <angular2-multiselect [data]="categories" [(ngModel)]="selectedItems" [settings]="settings"
                                formControlName="categories">
                            </angular2-multiselect>
                            <app-control-messages [control]="f['categories']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right"
                            [ngClass]="isView?'':'required'">
                            {{ 'letterDenunciation.label.code' | translate }}
                        </label>
                        <div class="ui-g-12 ui-md-3 ui-lg-3">
                            <input type="text" class="form form-control" [attr.disabled]="true" name="code"
                                formControlName="code" maxlength="50" />
                            <app-control-messages [control]="f['code']"></app-control-messages>
                        </div>
                        <label class="ui-g-12 ui-md-3 ui-lg-3 control-label vt-align-right"
                            [ngClass]="isView?'':'required'">
                            {{ 'letterDenunciation.label.dateOfReception' | translate }}
                        </label>
                        <div class="ui-g-12 ui-md-3 ui-lg-3">
                            <date-picker [property]="f['dateOfReception']" (onChanged)="generateLetterDenunciationCode()"
                                [disabled]="isView"></date-picker>
                            <app-control-messages [control]="f['dateOfReception']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right"
                            [ngClass]="isView?'':'required'">
                            {{lableName}}
                        </label>
                        <div class="ui-g-12 ui-md-9 ui-lg-9">
                            <input type="text" class="form form-control" name="name" formControlName="name"
                                [attr.disabled]="isView?true:null" maxlength="200" />
                            <app-control-messages [control]="f['name']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right"
                            [ngClass]="isView?'':'required'">
                            {{lableContent}}
                        </label>
                        <div class="ui-g-12 ui-md-9 ui-lg-9">
                            <textarea type="text" rows="4" name="content" class="form-control" formControlName="content"
                                maxlength="1500">
                            </textarea>
                            <app-control-messages [control]="f['content']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right">
                            {{'common.label.attachmentFile' | translate}}
                        </label>
                        <div class="ui-g-12 ui-md-9 ui-lg-3">
                            <multi-file-chooser class="attachment-file" [property]="f['files']" fileName="fileAttachment" [validMaxSize]="50"
                                validType="png,jpg,xls,xlsx,doc,docx,pdf,rar,zip,7z" [disabled]="isView"
                                downLoadFile="true">
                            </multi-file-chooser>
                            <app-control-messages [control]="f['files']"></app-control-messages>
                        </div>
                    </div>
                    <div class="ui-g-12 vt-row">
                        <label class="ui-g-12 ui-md-3 ui-lg-2 control-label vt-align-right" [ngClass]="isView?'':'required'">
                            {{ 'letterDenunciation.label.type' + f['type'].value | translate }}
                        </label>
                        <div class="ui-g-12 ui-md-9 ui-lg-9">
                            <multi-data-picker *ngIf="type === types[0].value || type === types[2].value"
                                [property]="f['employeeIds']" systemCode="political" operationKey="action.view"
                                adResourceKey="resource.receiveLetterDenunciation" objectBO="EmployeeBO"
                                codeField="employeeCode" nameField="fullName" emailField="email" selectField="employeeId"
                                isSearchByPartyDomainData="true" filterCondition="AND obj.status = 1" [disabled]="isView">
                            </multi-data-picker>
                            <app-control-messages [control]="f['employeeIds']"></app-control-messages>
    
                            <multi-party-org-selector *ngIf="type === types[1].value || type === types[3].value"
                                [property]="f['partyOrganizationIds']" operationKey="action.view"
                                adResourceKey="resource.receiveLetterDenunciation" [disabled]="isView">
                            </multi-party-org-selector>
                            <app-control-messages [control]="f['partyOrganizationIds']"></app-control-messages>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div
        *ngIf="(!hasPermission('action.view') && isView) || (!hasPermission('action.update') && isUpdate) || (!hasPermission('action.insert') && isInsert)">
        {{'common.haveNoPermission' | translate}}
    </div>
</div>